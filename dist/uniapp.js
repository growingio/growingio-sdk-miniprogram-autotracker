const e=e=>["undefined","null"].includes(T(e)),t=e=>"string"===T(e),i=e=>"number"===T(e),n=e=>"boolean"===T(e),s=t=>"[object Object]"==={}.toString.call(t)&&!e(t),o=e=>["function","asyncfunction"].includes(T(e)),r=e=>Array.isArray(e)&&"array"===T(e),a=e=>{try{return Array.from(e)[0]}catch(e){return}},l=e=>{try{const t=Array.from(e);return t[t.length-1]}catch(e){return}},u=(e,t=1)=>r(e)&&i(t)?e.slice(t>0?t:1,e.length):e,g=e=>{if(r(e)){let t=0;const i=[];for(const n of e)n&&!P(n)&&(i[t++]=n);return i}return e},c=(e,t)=>{if(r(e)){const i=e.findIndex(t);return 0>i?void 0:e[i]}},h=t=>e(t)?"":""+t,d=(e,t)=>"string"===T(e)?e.split(t):e,p=e=>{if(t(e)){const t=d(e,"");return`${a(t).toLowerCase()}${u(t).join("")}`}return e},v=(e,t)=>e.slice(0,t.length)===t,m={}.hasOwnProperty,f=(t,i)=>!e(t)&&m.call(t,i),I=e=>s(e)?Object.keys(e):[],S=(e,t)=>{I(e).forEach((i=>t(e[i],i)))},y=(e,t)=>{const i=I(e);return!(!s(e)||!s(t)||i.length!==I(t).length||i.map(((i,n)=>s(e[i])?y(e[i],t[i]):e[i]===t[i])).includes(!1))},O=(e,t,i)=>{let n=e;return s(e)?(t.split(".").forEach((e=>{n=n?n[e]:i})),n):i},w=(e,t)=>{if(!s(e))return!1;try{if("string"===T(t))return delete e[t];if("array"===T(t))return t.map((t=>delete e[t]));"object"===T(t)&&t.constructor===RegExp&&I(e).forEach((i=>{t.test(i)&&w(e,i)}))}catch(e){return!1}},b=(e,t=250,i,n)=>{let s,o=0;return"boolean"!==T(i)&&(n=e,e=i,i=void 0),function(...r){let a=this,l=Date.now()-o;function u(){o=Date.now(),e.apply(a,r)}n&&!s&&u(),s&&clearTimeout(s),void 0===n&&l>t?u():!0!==i&&(s=setTimeout(n?function(){s=void 0}:u,void 0===n?t-l:t))}},P=e=>r(e)?0===e.length:s(e)?0===I(e).length:!e,T=e=>({}.toString.call(e).slice(8,-1).toLowerCase());var _=Object.freeze({__proto__:null,isNil:e,isString:t,isNaN:e=>"NaN"===h(Number(e)),isNumber:i,isBoolean:n,isObject:s,isRegExp:e=>"[object RegExp]"==={}.toString.call(e),isFunction:o,isArray:r,isDate:e=>"date"===T(e),fixed:(e,n)=>i(e)?Number(e.toFixed(i(n)?n:2)):t(e)&&"NaN"!==h(Number(e))?Number(Number(e).toFixed(i(n)?n:2)):e,head:a,last:l,drop:u,dropWhile:(e,t)=>r(e)?e.filter((e=>!t(e))):e,compact:g,find:c,isEqualArray:(e,t)=>!(!r(e)||!r(t)||e.length!==t.length)&&e.every(((e,i)=>e===t[i])),toString:h,split:d,lowerFirst:p,upperFirst:e=>{if(t(e)){const t=d(e,"");return`${a(t).toUpperCase()}${u(t).join("")}`}return e},startsWith:v,endsWith:(e,t)=>{const{length:i}=e;let n=i;n>i&&(n=i);const s=n;return n-=t.length,n>=0&&e.slice(n,s)===t},hasOwnProperty:m,has:f,keys:I,forEach:S,isEqual:y,get:O,unset:w,throttle:b,isEmpty:P,typeOf:T,formatDate:e=>{function t(e){return 10>e?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}});const C=(e,t)=>{console.log("%c[GrowingIO]："+e,{info:"color: #3B82F6;",error:"color: #EF4444",warn:"color: #F59E0B",success:"color: #10B981"}[t]||"")},k=(e,t=!0,i="参数不合法")=>C(`${t?"调用":"设置"} ${e} 失败，${i}!`,"warn"),E=e=>{try{return e()}catch(e){return}},A=e=>t(e)?e.trim().substring(0,100):e,j=(e,i)=>t(e)&&!P(e)&&e.match(/^[a-zA-Z_][0-9a-zA-Z_]{0,100}$/)?i():(C("事件名格式不正确，只能包含数字、字母和下划线，且不能以数字开头，字符总长度不能超过100!","error"),!1),x=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),N=e=>e.pixelRatio?Math.round(e.screenHeight*e.pixelRatio):e.screenHeight,q=e=>e.pixelRatio?Math.round(e.screenWidth*e.pixelRatio):e.screenWidth,$=(e,t)=>{if(e){const i=e.toLowerCase();return-1!==i.indexOf("android")?t+"-Android":-1!==i.indexOf("ios")?t+"-iOS":e}},D=e=>{if(t(e)){const t=e.indexOf("?");return-1!==t?[e.substring(0,t),e.substring(t+1)]:[e,""]}return["",""]},H=e=>t(e)?e.startsWith("/")?e:"/"+e:"",U=e=>E((()=>{switch(e){case"wx":return wx;case"my":case"tb":return my;case"swan":return swan;case"tt":return tt;case"qq":return qq;case"ks":return ks;case"jd":return jd;default:{let e;return e||(e=E((()=>swan))),e||(e=E((()=>my))),e||(e=E((()=>tt))),e||(e=E((()=>qq))),e||(e=E((()=>ks))),e||(e=E((()=>jd))),e||(e=E((()=>wx))),e}}})),F=e=>E((()=>{switch(e){case"wx":return __wxConfig;case"swan":return appConfig;case"tt":return __ttConfig;case"qq":return __qqConfig;case"ks":return __ksConfig;case"jd":return __jdConfig;default:return}})),B=()=>{let e;return!e&&E((()=>swan))&&(e="swan"),!e&&E((()=>tt))&&(e="tt"),!e&&E((()=>qq))&&(e="qq"),!e&&E((()=>my.tb))&&(e="tb"),!e&&E((()=>my))&&(e="my"),!e&&E((()=>ks))&&(e="ks"),!e&&E((()=>jd))&&(e="jd"),!e&&E((()=>wx))&&(e="wx"),e||c(I(global),(e=>h(e).toLowerCase().includes("quickapp")))&&(e="quickapp"),e},L=e=>I(e).filter((e=>e.indexOf("__sub")>-1&&e.indexOf("gio__")>-1)).sort(),R=()=>{let e=E((()=>getApp({allowDefault:!0})));return e||(e=V()),e},V=()=>{var e;return null!==(e=E((()=>$global)))&&void 0!==e?e:global},K=t=>{const i={};return s(t)&&S(t,((t,n)=>{const o=h(n).slice(0,100);s(t)?i[o]=K(t):r(t)?(i[o]=t.slice(0,100),i[o]=i[o].join("||").slice(0,1e3)):i[o]=e(t)?"":h(t).slice(0,1e3)})),i},M=(e,t)=>{const i=()=>t.map((t=>e.getStorageSync(t)));try{return e.minip.canIUse("batchGetStorageSync")?e.minip.batchGetStorageSync(t):i()}catch(e){return i()}},G=(e,t)=>{const i=()=>t.map((({key:t,value:i})=>e.setStorageSync(t,i)));try{return e.minip.canIUse("batchSetStorageSync")?e.minip.batchSetStorageSync(t):i()}catch(e){return i()}},Q=t=>I(t||{}).map((i=>i?`${i}=${e(t[i])?"":t[i]}`:"")).join("&"),W=e=>{(v(e,"?")||v(e,"&"))&&(e=e.slice(1,e.length));const t={};return e.split("&").forEach((e=>{const i=e.split("=");i[0]&&(t[i[0]]=i[1])})),t};var z=Object.freeze({__proto__:null,consoleText:C,callError:k,niceTry:E,niceCallback:(e,t)=>{if(o(e))try{e(t)}catch(e){C("回调执行失败！"+e,"error")}},limitString:A,eventNameValidate:j,guid:x,getScreenHeight:N,getScreenWidth:q,getOS:$,compareVersion:(e="",t="")=>{const i=e=>e.replace(/\s+/g,""),n=e=>e.replace(/[vV]/g,""),s=i(n(e)),o=i(n(t)),r=s.split("."),a=o.split(".");for(let e=0;3>e;e++){let t=Number(r[e]),i=Number(a[e]);if(t>i)return 1;if(i>t)return-1;if(!isNaN(t)&&isNaN(i))return 1;if(isNaN(t)&&!isNaN(i))return-1}return 0},getVueVersion:e=>{if(e){const t=Number.parseInt(a(d(e.version,".")),10);return Number.isNaN(t)?0:t}return 0},splitPath:D,normalPath:H,isTaro3:e=>{const{Current:t,createComponent:i}=e;return!(!e||!t||i)},getPlainMinip:U,getPlainConfig:F,getPlainPlatform:B,getSubKeys:L,getAppInst:R,getGlobal:V,limitObject:K,batchGetStorageSync:M,batchSetStorageSync:G,qsStringify:Q,qsParse:W,hashCode:e=>{let t=0;if(P(e)||"boolean"==typeof e)return t;let i=0;for(;i<e.length;)t=(t<<5)-t+e.charCodeAt(i),t&=t,i++;return t}});const J=e=>t(e)&&e.length>0||i(e)&&e>0,Y={autotrack:{type:"boolean",default:!0},compress:{type:"boolean",default:!0},dataCollect:{type:"boolean",default:!0},debug:{type:"boolean",default:!1},idMapping:{type:"boolean",default:!1},enableIdMapping:{type:"boolean",default:!1},extraParams:{type:"array",default:[]},followShare:{type:"boolean",default:!0},forceLogin:{type:"boolean",default:!1},ignoreFields:{type:"array",default:[]},pluginMode:{type:"boolean",default:!1},originalSource:{type:"boolean",default:!0},keepAlive:{type:"number",default:3e5},performance:{type:"object",default:{monitor:!0,exception:!0}},serverUrl:{type:"string",default:"https://napi.growingio.com"},requestTimeout:{type:"number",default:5e3},taro:{type:["object","module"],default:!1},taroVue:{type:["object","function"],default:!1},tbConfig:{type:"object",default:{cloud:void 0,cloudFuncSend:!1,cloudFuncName:"httpTunnel",cloudFuncHandler:"main",cloudAppId:void 0,path:void 0}},uniVue:{type:["object","function"],default:!1},uploadInterval:{type:"number",default:1e3},version:{type:"string",default:"1.0.0"}},Z=["clearGeneralProps","clearTrackTimer","clearUserId","getDeviceId","getGioInfo","getOption","identify","init","registerPlugins","removeTimer","setGeneralProps","setLocation","setOption","setPageAttributes","setUserAttributes","setUserId","track","trackTimerEnd","trackTimerPause","trackTimerResume","trackTimerStart","updateImpression","getABTest"],X={autotrack:"无埋点",dataCollect:"数据采集",debug:"调试模式",serverUrl:"数据上报服务地址"},ee=["enableDebug","setAutotrack","setDataCollect","setTrackerHost","setTrackerScheme","setConfig","collectImp","setPlatformProfile","getLocation"],te=["deviceBrand","deviceModel","deviceType","networkState","screenHeight","screenWidth","operatingSystem"],ie=[...te,"appChannel","language","platformVersion"];class ne{constructor(e){this.growingIO=e,this.main=e=>{var t,i,n,s,o;const{sdkVersion:r,vdsConfig:a,platformConfig:l,minipInstance:u,userStore:g,dataStore:{scene:c,eventHooks:h,locationData:d,lastVisitEvent:p}}=this.growingIO,{systemInfo:v={},network:m={}}=u,{brand:f,model:I,platform:S,language:y,version:O}=v,b={appChannel:"scn:"+(c||"NA"),appVersion:a.version,dataSourceId:a.dataSourceId,deviceBrand:f,deviceId:g.uid,deviceModel:I,deviceType:$(S,l.name),domain:a.appId,language:y,latitude:null==d?void 0:d.latitude,longitude:null==d?void 0:d.longitude,networkState:(null==m?void 0:m.networkType)||(null==m?void 0:m.type)||(null==m?void 0:m.subtype),operatingSystem:$(S,l.name),path:(null===(t=h.currentPage)||void 0===t?void 0:t.path)?null===(i=h.currentPage)||void 0===i?void 0:i.path:p.path,platform:l.platform,platformVersion:l.name+(O?" "+O:""),query:(null===(n=h.currentPage)||void 0===n?void 0:n.path)?null===(s=h.currentPage)||void 0===s?void 0:s.query:p.query,screenHeight:N(v),screenWidth:q(v),sdkVersion:r,sessionId:g.sessionId,title:(null===(o=h.currentPage)||void 0===o?void 0:o.title)||u.getPageTitle(u.getCurrentPage()),timestamp:Date.now(),timezoneOffset:(new Date).getTimezoneOffset(),userId:g.userId};return a.idMapping&&(b.userKey=g.userKey),P(a.ignoreFields)||a.ignoreFields.forEach((e=>{w(b,e)})),P(e)?b:Object.assign(Object.assign({},b),e)}}}function se(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))}class oe{constructor(t){this.growingIO=t,this.main=(e,t)=>{var i,n;const s=Date.now(),{emitter:o,userStore:r,vdsConfig:a,platformConfig:l,uploader:u,dataStore:g,dataStore:{shareOut:c,keepAlive:h,lastCloseTime:d,eventHooks:p,saveStorageInfo:v}}=this.growingIO;o.emit("minipLifecycle",{event:"App "+e,timestamp:s,params:null!==(i=t[0])&&void 0!==i?i:{}}),a.debug&&console.log("App:",e,s);const m=l.listeners.app;switch(o.emit("onComposeBefore",{event:"App "+e,params:null!==(n=t[0])&&void 0!==n?n:{}}),e){case m.appCreate:case m.appShow:{const{path:e,query:i}=this.enterParamsParse(t[0]);!c&&a.originalSource&&g.setOriginalSource({path:e,query:i}),d?(Date.now()-d>h||g.lastScene&&g.scene!==g.lastScene)&&(r.sessionId="",p.currentPage.time=void 0,this.buildVisitEvent({path:e,query:i})):(this.growingIO.dataStore.lastVisitEvent={path:e,query:i},this.buildVisitEvent({path:e,query:i}));break}case m.appClose:g.lastScene=g.scene,g.lastCloseTime=Date.now(),v(),r.saveUserInfo(),this.buildCloseEvent(),a.forceLogin||u.initiateRequest(!0)}},this.enterParamsParse=e=>{const{gioPlatform:t,minipInstance:i,dataStore:n}=this.growingIO;let o="",r="";const a=(e,t={})=>{o=e,r=I(t).map((e=>`${e}=${t[e]}`)).join("&")};if("quickapp"!==t&&i.minip.canIUse("getEnterOptionsSync")){const{path:t,query:o,scene:l,referrerInfo:u}=i.minip.getEnterOptionsSync()||{},g=e.query||o;if(a(e.path||t,g),n.scene=e.scene||l,!P(u)&&s(null==u?void 0:u.extraData)){let e=[];S(u.extraData,((t,i)=>{!f(g,i)&&["string","number","boolean"].includes(T(t))&&e.push(`${i}=${t}`)}));const t=e.join("&");r=r&&t?`${r}&${t}`:r||t}}else{const{path:t,query:i}=e;a(t,i),this.parseScene(e)}return{path:o,query:r}},this.parseScene=e=>{var t;const{minipInstance:i,gioPlatform:n,dataStore:s}=this.growingIO;let o;if("quickapp"===n){const{extra:e,type:t}=i.getAppSource();o=(null==e?void 0:e.scene)||t}else P(e)||((null===(t=null==e?void 0:e.query)||void 0===t?void 0:t.wxShoppingListScene)?o=e.query.wxShoppingListScene:(null==e?void 0:e.scene)?o=e.scene:s.scene="NA");s.scene=o},this.buildVisitEvent=t=>{const{dataStore:i,vdsConfig:n,minipInstance:s}=this.growingIO,{originalSourceName:o,getOriginalSource:r,eventContextBuilder:a,eventInterceptor:l}=i,u=r(),g=(null==t?void 0:t.query)||"";let c=Object.assign({eventType:"VISIT"},a({path:(null==t?void 0:t.path)||"",query:"string"===T(g)?g:Q(g)}));n.originalSource&&!e(u)&&(c=Object.assign(Object.assign({},c),u),n.dataCollect&&s.removeStorageSync(o)),l(c)},this.buildCloseEvent=()=>{const{dataStore:{eventContextBuilder:e,eventInterceptor:t}}=this.growingIO;t(Object.assign({eventType:"APP_CLOSED"},e()))}}}class re{constructor(e){this.growingIO=e,this.parsePage=(e,t)=>{var i;const n=e.route||e.uri||e.__route__||(null===(i=null==e?void 0:e.$page)||void 0===i?void 0:i.fullPath)||"";P(t)?this.query=void 0:this.query=this.getQuery(t),this.path!==n&&(this.time=Date.now()),this.path=n,this.title=this.settedTitle[this.path]||this.growingIO.minipInstance.getPageTitle(e||this.growingIO.minipInstance.getCurrentPage())},this.getQuery=e=>{const t=Object.assign({},e);return w(t,"wxShoppingListScene"),Q(t)},this.getReferralPage=()=>{const{minipInstance:e,dataStore:{lastPageEvent:t,scene:i}}=this.growingIO;return(null==t?void 0:t.path)||(i?`scn:${e.scnPrefix}${i}`:null)},this.saveShareId=e=>{(null==e?void 0:e.gioShareId)&&(this.queryShareId=e.gioShareId)},this.updateShareResult=e=>{const[t,i]=this.buildShareQuery(e);return e.path=H(t+(i?"?"+i:"")),e.query=i,e},this.updateAppMessageResult=this.updateShareResult,this.updateTimelineResult=this.updateShareResult,this.updateAddFavoritesResult=e=>{const[t,i]=this.buildShareQuery(e);return e.path=H(t+(i?"?"+i:"")),e.query=i,e},this.query=void 0,this.settedTitle={},this.pageProps={}}buildShareQuery(e){var t,i,n;const s=D(null!==(t=e.path)&&void 0!==t?t:"");let o=this.path,r={},u=f(e,"path");return u&&(o=a(s),r=W(l(s))||{}),P(r)&&(r=W(null!==(i=e.query)&&void 0!==i?i:"")||{}),!u&&P(r)&&(r=W(null!==(n=this.query)&&void 0!==n?n:"")||{}),[o,Q(r)]}}class ae{constructor(e){this.growingIO=e,this.main=(e,t,i)=>{var n,s;const r=Date.now(),{emitter:a,minipInstance:l,plugins:u,vdsConfig:g,platformConfig:c,dataStore:{shareOut:h,eventHooks:d,toggleShareOut:p,buildAppMessageEvent:v,buildTimelineEvent:m,buildAddFavorites:f},inPlugin:I}=this.growingIO,{currentPage:S}=d;if(this.prevEvent[t]&&50>Date.now()-Number(this.prevEvent[t]))return;e||(e=l.getCurrentPage()),e.route||(e.route=l.getCurrentPath(e));const y=e.route||e.uri||e.__route__||(null===(n=null==e?void 0:e.$page)||void 0===n?void 0:n.fullPath)||"";a.emit("minipLifecycle",{event:"Page "+t,timestamp:r,params:{page:e,args:i[0]}}),g.debug&&console.log("Page:",y,"#",t,r),this.prevEvent[t]=Date.now();const b=c.listeners.page;switch(a.emit("onComposeBefore",{page:e,event:"Page "+t,params:{page:e,args:i[0]}}),S.lastLifecycle=S.currentLifecycle,S.currentLifecycle=t,t){case b.pageLoad:this.argQuery[y]=O(e,"options")||O(e,"__displayReporter.query")||O(e,"$page.query")||O(e,"$wx.__displayReporter.query")||i[0]||{},w(this.argQuery[y],"$taroTimestamp"),S.parsePage(e,this.argQuery[y]);break;case b.pageShow:I?(S.parsePage(e,this.argQuery[y]),S.path||(S.path=`/插件${g.appId}}`,S.title=`/插件${g.appId}}`),this.buildPageEvent()):h&&d.currentPage.time||(S.parsePage(e,this.argQuery[y]),d.currentPage.time=Date.now(),this.buildPageEvent()),p(!1),S.saveShareId(this.argQuery[y]);break;case b.pageHide:case b.pageUnload:break;case b.shareApp:p(!0),g.followShare&&v(i);break;case b.shareTime:g.followShare&&m(i);break;case b.addFavorites:f(i);break;case b.tabTap:{const e=null===(s=null==u?void 0:u.gioEventAutoTracking)||void 0===s?void 0:s.buildTabClickEvent;g.autotrack&&e&&o(e)&&e(i[0]);break}}t===b.pageUnload&&(S.pageProps[y]=void 0)},this.buildPageEvent=e=>{var t;const{dataStore:{eventContextBuilder:i,eventInterceptor:n,eventHooks:s}}=this.growingIO,{currentPage:o}=s,r=Object.assign(Object.assign({eventType:"PAGE",referralPage:o.getReferralPage()},i()),{timestamp:o.time});P(o.pageProps[r.path])||(r.attributes=o.pageProps[r.path]),!P(e)&&e.path&&(r.path=e.path,r.query=e.query,r.title=null!==(t=e.title)&&void 0!==t?t:r.title),n(r)},this.prevEvent={},this.argQuery={}}}class le{constructor(e){var t,i;this.growingIO=e,this.isNormalFc=(e,t)=>o(t)&&"constructor"!==e,this.objectTraverse=(e,t)=>{Object.getOwnPropertyNames(e).forEach((i=>t(i,e))),f(e,"methods")&&Object.getOwnPropertyNames(e.methods).forEach((i=>{e[i]||t(i,e.methods)})),f(e,"lifetimes")&&Object.getOwnPropertyNames(e.lifetimes).forEach((i=>{e[i]||t(i,e.lifetimes)})),f(e,"pageLifetimes")&&Object.getOwnPropertyNames(e.pageLifetimes).forEach((i=>{e[i]||t(i,e.pageLifetimes)}))},this.supLifeFcs=(e,t)=>{r(this[t+"Handlers"])&&this[t+"Handlers"].forEach((t=>{o(e[t])||["onShareAppMessage","onShareTimeline"].includes(t)||(e[t]=()=>{})}))},this.lifeFcEffects=(e,t,i)=>{const n=this;return["onShareTimeline","onAddToFavorites"].includes(e)?function(...s){let o=t.apply(this,s);"onShareTimeline"===e&&n.growingIO.vdsConfig.followShare&&(o=n.currentPage.updateTimelineResult(null!=o?o:{})),"onAddToFavorites"===e&&(o=n.currentPage.updateAddFavoritesResult(null!=o?o:{}));const r=[].slice.call(s);return o&&r.push(o),n[`def${i}Cbs`][e].apply(this,r),o}:function(...s){var o;return se(this,void 0,void 0,(function*(){let r;try{if("onShareAppMessage"===e){if(r=null!==(o=yield t.apply(this,s))&&void 0!==o?o:{},"promise"===T(r.promise)){const e=function(){return se(this,void 0,void 0,(function*(){let e=r;return new Promise((t=>{let i=setTimeout((()=>{t(Object.assign({},e)),clearTimeout(i),i=void 0}),3e3);r.promise.then((n=>{e=n,t(Object.assign({},e)),clearTimeout(i),i=void 0}))}))}))};r=Object.assign(Object.assign({},r),yield e()),w(r,"promise")}n.growingIO.vdsConfig.followShare&&(r=n.currentPage.updateAppMessageResult(null!=r?r:{}))}const a=[].slice.call(s);r&&a.push(r),n[`def${i}Cbs`][e].apply(this,a)}catch(e){C(e,"error")}return"onShareAppMessage"!==e&&(r=t.apply(this,s)),n.growingIO.emitter.emit("minipLifecycle",{event:`${i} ${e}End`,timestamp:Date.now(),params:{instance:this,arguments:Array.from(s)}}),r}))}},this.customFcEffects=(e,t)=>{const i=this;return function(...n){var s,r;let a;if(i.growingIO.vdsConfig.autotrack&&i.growingIO.plugins.gioEventAutoTracking)try{let t=n[0]||{};f(t,"type")&&((null==t?void 0:t.currentTarget)||(null==t?void 0:t.target))||(t=n[n.length-1]),((null==t?void 0:t.currentTarget)||(null==t?void 0:t.target))&&i.actionEventTypes.includes(t.type)&&(o(i.actionEffects)||(i.actionEffects=(null===(r=null===(s=i.growingIO.plugins)||void 0===s?void 0:s.gioEventAutoTracking)||void 0===r?void 0:r.main)||function(){}),null==i||i.actionEffects(t,e))}catch(e){C(e,"error")}return a=t.apply(this,n),a}},this.appApplyProxy=(e,t)=>this.appHandlers.includes(e)?this.lifeFcEffects(e,t,"App"):this.customFcEffects(e,t),this.pageApplyProxy=(e,t)=>this.pageHandlers.includes(e)?this.lifeFcEffects(e,t,"Page"):this.customFcEffects(e,t),this.appOverriding=e=>(this.setAppEffectCbs(),this.supLifeFcs(e,"app"),this.objectTraverse(e,((e,t)=>{this.isNormalFc(e,t[e])&&(t[e]=this.appApplyProxy(e,t[e]))})),e),this.pageOverriding=e=>(this.setPageEffectCbs(),this.supLifeFcs(e,"page"),this.objectTraverse(e,((e,t)=>{this.isNormalFc(e,t[e])&&(t[e]=this.pageApplyProxy(e,t[e]))})),e),this.componentOverriding=e=>(this.setPageEffectCbs(),e.methods||(e.methods={}),this.supLifeFcs(this.growingIO.inPlugin?e:e.methods,"page"),this.objectTraverse(this.growingIO.inPlugin?e:e.methods,((e,t)=>{this.isNormalFc(e,t[e])&&(t[e]=this.pageApplyProxy(e,t[e]))})),e),this.setAppEffectCbs=()=>{const e=this;this.appHandlers.forEach((t=>{this.defAppCbs[t]=function(...i){e.appEffects.main(t,i)}}))},this.setPageEffectCbs=()=>{const e=this;this.pageHandlers.forEach((t=>{this.defPageCbs[t]=function(...i){e.pageEffects.main(this,t,i)}}))},this.growingApp=e=>this.originalApp(this.appOverriding(e)),this.growingPage=e=>this.originalPage(this.pageOverriding(e)),this.growingComponent=e=>this.originalComponent(this.componentOverriding(e)),this.growingBehavior=e=>this.originalBehavior(this.componentOverriding(e)),this.nativeGrowing=(e=["App","Page","Component","Behavior"])=>{const t=this,{platformConfig:i}=this.growingIO,n=i.hooks;if(this.setAppEffectCbs(),this.setPageEffectCbs(),e.includes("App"))try{n.App&&!this.appHooked&&(App=function(...e){return t.growingApp(e[0])},this.appHooked=!0)}catch(e){}if(e.includes("Page"))try{n.Page&&!this.pageHooked&&(Page=function(...e){return t.growingPage(e[0])},this.pageHooked=!0)}catch(e){}if(e.includes("Component"))try{n.Component&&!this.componentHooked&&(Component=function(...e){return t.growingComponent(e[0])},this.componentHooked=!0)}catch(e){}if(e.includes("Behavior"))try{n.Behavior&&!this.behaviorHooked&&(Behavior=function(...e){return t.growingBehavior(e[0])},this.behaviorHooked=!0)}catch(e){}},this.initEventHooks=()=>{const e=this,{platformConfig:t,gioPlatform:i}=this.growingIO;t.canHook?(this.nativeGrowing(),V().GioApp=E((()=>null!==App&&void 0!==App?App:window.GioApp)),V().GioPage=E((()=>null!==Page&&void 0!==Page?Page:window.GioPage)),V().GioComponent=E((()=>null!==Component&&void 0!==Component?Component:window.GioComponent)),V().GioBehavior=E((()=>Behavior))):"quickapp"===i&&(window.GioApp=function(...t){return e.appOverriding(t[0])},window.GioPage=function(...t){return e.pageOverriding(t[0])},window.GioComponent=function(...t){return e.pageOverriding(t[0])})};const n=null===(t=this.growingIO)||void 0===t?void 0:t.platformConfig;this.defAppCbs={},this.defPageCbs={},this.appHandlers=n.appHandlers,this.pageHandlers=n.pageHandlers,this.actionEventTypes=n.actionEventTypes,this.originalApp=n.originalApp,this.originalPage=n.originalPage,this.originalComponent=n.originalComponent,this.originalBehavior=null!==(i=n.originalBehavior)&&void 0!==i?i:function(){},this.appEffects=new oe(this.growingIO),this.pageEffects=new ae(this.growingIO),this.currentPage=new re(this.growingIO)}}class ue{constructor(i){var s,l;this.growingIO=i,this.ALLOW_SETTING_KEYS=I(Y),this.gsidStorageName="_growing_gsid_",this.originalSourceName="gdp_original_source",this.initStorageInfo=()=>{const{minipInstance:e}=this.growingIO,t=R(),i=t.gio_gsid?t.gio_gsid:Number.parseInt(e.getStorageSync(this.gsidStorageName),10);this._gsid=Number.isNaN(i)||i>=1e9||1>i?1:i,this._stid=this._gsid,i!==this._gsid&&e.setStorageSync(this.gsidStorageName,this._gsid)},this.saveStorageInfo=()=>{const{minipInstance:e}=this.growingIO;this._stid=this._gsid,G(e,[{key:this.gsidStorageName,value:this._gsid}])},this.setOriginalSource=({path:t,query:i})=>{const{minipInstance:n}=this.growingIO;if(e(this.getOriginalSource())){const e={path:t,query:i,title:""};n.setStorageSync(this.originalSourceName,JSON.stringify(e))}},this.getOriginalSource=()=>{const{minipInstance:e}=this.growingIO;return E((()=>JSON.parse(e.getStorageSync(this.originalSourceName))))},this.initOptions=e=>{var t,i,n,s,o,a,l,u;const{projectId:g,dataSourceId:c,appId:h}=e,d={};this.ALLOW_SETTING_KEYS.forEach((t=>{const i=Y[t].type;(r(i)?i.includes(T(e[t])):T(e[t])===Y[t].type)?"ignoreFields"===t?d.ignoreFields=e.ignoreFields.filter((e=>te.includes(e))):"extraParams"===t?d.extraParams=e.extraParams.filter((e=>ie.includes(e))):d[t]=e[t]:d[t]=Y[t].default})),d.uploadInterval=Math.round(d.uploadInterval),(Number.isNaN(d.uploadInterval)||0>d.uploadInterval||d.uploadInterval>2e3)&&(d.uploadInterval=1e3),d.enableIdMapping&&!d.idMapping&&(d.idMapping=!0),d.pluginMode&&(this.growingIO.inPlugin=!0),!isNaN(Number(d.requestTimeout))&&d.requestTimeout>0||(d.requestTimeout=5e3),this.growingIO.vdsConfig=Object.assign(Object.assign({},d),{projectId:g,dataSourceId:c,appId:h,performance:{monitor:null===(i=null===(t=d.performance)||void 0===t?void 0:t.monitor)||void 0===i||i,exception:null===(s=null===(n=d.performance)||void 0===n?void 0:n.exception)||void 0===s||s,network:null!==(a=null===(o=d.performance)||void 0===o?void 0:o.network)&&void 0!==a&&a}}),this.keepAlive=d.keepAlive,d.dataCollect||C("已关闭数据采集","info"),d.autotrack||C("已关闭无埋点","info");const{plugins:p,inPlugin:v,minipInstance:m}=this.growingIO,{uniVue:f,taro:I}=d;f||I||(this.growingIO.platformConfig.canHook=!0),v&&!["tbp","jdp"].includes(m.platform)||this.eventHooks.initEventHooks(),f&&(null===(l=null==p?void 0:p.gioUniAppAdapter)||void 0===l||l.main()),I&&(null===(u=null==p?void 0:p.gioTaroAdapter)||void 0===u||u.main())},this.setOption=(e,i)=>{var n;const{vdsConfig:s,userStore:o,uploader:r,emitter:a}=this.growingIO,l=t(e)&&this.ALLOW_SETTING_KEYS.includes(e),u=l&&typeof i===(null===(n=Y[e])||void 0===n?void 0:n.type);if(l&&u){if("dataCollect"===e&&!1===s.dataCollect&&!0===i){let e=setTimeout((()=>{o.sessionId="";const{path:t,query:i,settedTitle:n}=this.eventHooks.currentPage;this.eventHooks.currentPage.title=n[t]||this.growingIO.minipInstance.getPageTitle(this.growingIO.minipInstance.getCurrentPage()),this.sendVisit({path:t,query:i}),this.eventHooks.currentPage.time=Date.now(),this.sendPage({path:t,query:i}),clearTimeout(e),e=null}),0)}return s[e]=i,"serverUrl"===e&&(null==r||r.generateURL()),a.emit("OPTION_CHANGE",{optionName:e,optionValue:i}),!0}return k("setOption > "+e),!1},this.getOption=t=>{const{vdsConfig:i}=this.growingIO;return t&&f(i,h(t))?i[h(t)]:e(t)?Object.assign({},i):void k("getOption > "+t)},this.toggleShareOut=e=>{n(e)?this.shareOut=e:this.shareOut=!this.shareOut},this.sendVisit=e=>{this.eventHooks.appEffects.buildVisitEvent(null!=e?e:this.lastVisitEvent),this.eventHooks.currentPage.time=Date.now()},this.sendPage=e=>{this.eventHooks.pageEffects.buildPageEvent(e)},this.eventConverter=e=>{const{vdsConfig:t,dataStore:i,uploader:n}=this.growingIO;if(t.dataCollect){["LOGIN_USER_ATTRIBUTES","APP_CLOSED"].includes(e.eventType)||(e.eventSequenceId=i.gsid,this.growingIO.dataStore.gsid+=1);const t={};S(e,((e,i)=>{var n;if("element"===i){const i=null!==(n=a(e))&&void 0!==n?n:{};S(i,((e,i)=>{P(e)&&0!==e||(t[i]=e)}))}else P(e)&&0!==e||(t[i]=e)})),this.growingIO.emitter.emit("onComposeAfter",{composedEvent:t}),n.commitRequest(Object.assign(Object.assign({},t),{requestId:x()}))}},this.eventInterceptor=e=>{const{systemInfo:t,network:i}=this.growingIO.minipInstance;P(t)||P(i)?this.interceptEvents.push(e):P(this.interceptEvents)?this.eventConverter(e):([...this.interceptEvents,e].forEach((e=>{const t=Object.assign(Object.assign({},e),this.eventContextBuilder({path:e.path,query:e.query,timestamp:e.timestamp}));this.eventConverter(t)})),this.interceptEvents=[])},this.eventReleaseInspector=()=>{const{minipInstance:{systemInfo:e,network:t}}=this.growingIO;e&&t&&!P(this.interceptEvents)&&([...this.interceptEvents].forEach((e=>{const t=Object.assign(Object.assign({},e),this.eventContextBuilder({path:e.path,query:e.query,timestamp:e.timestamp}));this.eventConverter(t)})),this.interceptEvents=[])},this.buildAppMessageEvent=e=>{var t;const i=e[0];let n;2>e.length?1===e.length&&(n=i):n=e[1];const{dataStore:{eventContextBuilder:s,eventInterceptor:o}}=this.growingIO,r=((null==n?void 0:n.path)||"").split("?");o(Object.assign({eventType:"CUSTOM",eventName:"$mp_on_share",attributes:Object.assign({$from:i.from,$target:null===(t=null==i?void 0:i.target)||void 0===t?void 0:t.id,$share_title:null==n?void 0:n.title,$share_path:a(r),$share_query:r[1]},null==n?void 0:n.attributes)},s()))},this.buildTimelineEvent=e=>{var t;const i=e[0];let n;2>e.length?1===e.length&&(n=i):n=e[1];const{dataStore:{eventContextBuilder:s,eventInterceptor:o}}=this.growingIO,r=((null==n?void 0:n.path)||"").split("?");o(Object.assign({eventType:"CUSTOM",eventName:"$mp_share_timeline",attributes:Object.assign({$target:null===(t=null==i?void 0:i.target)||void 0===t?void 0:t.id,$share_title:null==n?void 0:n.title,$share_path:a(r),$share_query:r[1]},null==n?void 0:n.attributes)},s()))},this.buildAddFavorites=e=>{const t=e[0];let i;2>e.length?1===e.length&&(i=t):i=e[1];const{dataStore:{eventContextBuilder:n,eventInterceptor:s}}=this.growingIO,o=((null==i?void 0:i.path)||"").split("?");s(Object.assign({eventType:"CUSTOM",eventName:"$mp_add_favorites",attributes:{$share_title:null==i?void 0:i.title,$share_path:a(o),$share_query:o[1]}},n()))},this.initStorageInfo(),this.eventContextBuilder=new ne(this.growingIO).main,this.eventHooks=new le(this.growingIO),this.shareOut=!1,this.lastVisitEvent={},this.lastPageEvent={},this.locationData={},this.generalProps={},this.trackTimers={},this.interceptEvents=[],this.growingIO.emitter.on("onComposeAfter",(({composedEvent:e})=>{"VISIT"!==e.eventType&&"vst"!==e.t||(this.lastVisitEvent=e),"PAGE"!==e.eventType&&"page"!==e.t||(this.lastPageEvent=e)})),o(null===(s=this.growingIO.minipInstance.minip)||void 0===s?void 0:s.onAppHide)&&this.growingIO.minipInstance.minip.onAppHide((()=>{S(this.trackTimers,(e=>{e.start&&(e.leng=e.leng+(+Date.now()-e.start))}))})),o(null===(l=this.growingIO.minipInstance.minip)||void 0===l?void 0:l.onAppShow)&&this.growingIO.minipInstance.minip.onAppShow((()=>{S(this.trackTimers,(e=>{e.start&&(e.start=+Date.now())}))})),this.growingIO.emitter.on("OPTION_CHANGE",(({optionName:e,optionValue:t})=>{"dataCollect"===e&&!1===t&&this.growingIO.clearTrackTimer()}))}get gsid(){const e=R(),t=L(e);return!P(t)&&e.gio_gsid?e.gio_gsid:this._gsid}set gsid(e){const t=Number.parseInt(e,10);this._gsid=Number.isNaN(t)||e>=1e9||1>e?1:e,R().gio_gsid=this._gsid,10>this._gsid-this._stid||this.saveStorageInfo()}get scene(){return this._scene}set scene(e){const t=this._scene;this._scene=e,t!==this._scene&&this.growingIO.emitter.emit("SCENE_UPDATE",{newScene:e,oldScene:t})}}const ge={scnPrefix:"",appHandlers:["onLaunch","onShow","onHide","onError","onPageNotFound","onUnhandledRejection","onThemeChange"],pageHandlers:["onLoad","onShow","onReady","onHide","onShareAppMessage","onTabItemTap","onUnload","onPullDownRefresh","onReachBottom","onResize"],actionEventTypes:["onclick","tap","onTap","longpress","longTap","blur","change","onChange","submit","confirm","getuserinfo","getphonenumber","contact","mouseup"],originalApp:E((()=>App)),originalPage:E((()=>Page)),originalComponent:E((()=>Component)),originalBehavior:E((()=>Behavior)),canHook:!0,hooks:{App:!0,Page:!0,Component:!0,Behavior:!0},listeners:{app:{appLaunch:"onLaunch",appShow:"onShow",appClose:"onHide"},page:{pageLoad:"onLoad",pageShow:"onShow",pageReady:"onReady",pageHide:"onHide",pageUnload:"onUnload",tabTap:"onTabItemTap",shareApp:"onShareAppMessage"},actions:{click:["onclick","tap","longpress","longTap","getuserinfo","getphonenumber","contact","mouseup"],change:["blur","change","confirm"],submit:["submit"]}}},ce=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"JingDong",platform:"jdp",scnPrefix:"jd_"}),he=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"KuaiShou",platform:"kuaishoup",scnPrefix:"ks_"}),de=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"Alipay",platform:"alip",scnPrefix:"alip_",hooks:Object.assign(Object.assign({},null==ge?void 0:ge.hooks),{Behavior:!1})}),pe=Object.assign(Object.assign({},ge),{pageHandlers:[...ge.pageHandlers,"onInit","didMount","didUnmount"],listeners:Object.assign(Object.assign({},ge.listeners),{page:Object.assign(Object.assign({},ge.listeners.page),{onInit:"onInit",didMount:"didMount",didUnmount:"didUnmount"})}),name:"Taobao",platform:"tbp",scnPrefix:"tbp_",hooks:Object.assign(Object.assign({},null==ge?void 0:ge.hooks),{Behavior:!1})}),ve=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"QQ",platform:"qq",scnPrefix:"qq_"});ve.pageHandlers=[...ge.pageHandlers,"onAddToFavorites"],ve.listeners.page.addFavorites="onAddToFavorites";const me=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"Baidu",platform:"baidup",scnPrefix:"baidup_"}),fe=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"Bytedance",platform:"bytedance",scnPrefix:"bytedance_"}),Ie=Object.assign(Object.assign({},ge),{listeners:Object.assign({},ge.listeners),name:"Weixin",platform:"MinP"});Ie.pageHandlers=[...ge.pageHandlers,"onShareTimeline","onAddToFavorites"],Ie.listeners.page=Object.assign(Object.assign({},ge.listeners.page),{shareTime:"onShareTimeline",addFavorites:"onAddToFavorites"});const Se=B(),ye=E((()=>{const e={jd:ce,ks:he,my:de,tb:pe,qq:ve,swan:me,tt:fe,wx:Ie}[Se];return e.canHook=!1,e}));class Oe{constructor(e){this.growingIO=e,this.minip=U("framework"),this.hookSetTitle=()=>{var e;const t=null===(e=this.minip)||void 0===e?void 0:e.setNavigationBarTitle,i=this;t&&Object.defineProperty(this.minip,"setNavigationBarTitle",{writable:!0,enumerable:!0,configurable:!0,value:function(){if(i.growingIO.gioSDKInitialized){const e=i.getCurrentPath(),{title:t}=arguments[0]||{};i.growingIO.dataStore.eventHooks.currentPage.settedTitle[e]=t}return t.apply(this,arguments)}})},this.navigateTo=e=>{var t;return null===(t=this.minip)||void 0===t?void 0:t.navigateTo(e)},this.switchTab=e=>{var t;null===(t=this.minip)||void 0===t||t.switchTab(e)},this.navigateToMiniProgram=e=>{var t;return null===(t=this.minip)||void 0===t?void 0:t.navigateToMiniProgram(e)},this.getImageInfo=({src:e,success:t,fail:i,complete:n})=>{var s;return null===(s=this.minip)||void 0===s?void 0:s.getImageInfo({src:e,success:t,fail:i,complete:n})},this.initImpression=e=>{var t,i;null===(i=null===(t=this.growingIO.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===i||i.main(e,"observeAll")},this.getCurrentPage=()=>E((()=>l(getCurrentPages())))||{},this.getCurrentPath=()=>{const e=this.getCurrentPage();return(null==e?void 0:e.route)||(null==e?void 0:e.uri)||(null==e?void 0:e.__route__)||""},this.getPageTitle=e=>{var i,n;let s="";const o=F(B());try{const r=(null==e?void 0:e.data)||e.$data||{};if(s=t(null==r?void 0:r.gioPageTitle)?null==r?void 0:r.gioPageTitle:"",0===s.length){const t=o.page[e.route]||o.page[e.route+".html"];s=t?t.window.navigationBarTitleText:o.global.window.navigationBarTitleText}if(0===s.length){const t=null===(n=null===(i=null==o?void 0:o.tabBar)||void 0===i?void 0:i.list)||void 0===n?void 0:n.find((t=>t.pagePath===e.route||t.pagePath===e.route+".html"));s=(null==t?void 0:t.text)||""}}catch(e){return""}return A(s)},this.getStorageSync=e=>{var t;let i=null===(t=this.minip)||void 0===t?void 0:t.getStorageSync(e);return s(i)&&i.expiredAt?i.expiredAt<Date.now()?"":i.value:i},this.getStorage=e=>new Promise((t=>{var i;null===(i=this.minip)||void 0===i||i.getStorage({key:e,success:({data:e})=>t(e),fail:()=>t("")})})),this.setStorageSync=(e,t,i)=>{var n;i&&(t={value:t,expiredAt:i}),null===(n=this.minip)||void 0===n||n.setStorageSync(e,t)},this.setStorage=(e,t)=>{var i;null===(i=this.minip)||void 0===i||i.setStorage({key:e,data:t})},this.removeStorageSync=e=>{var t;null===(t=this.minip)||void 0===t||t.removeStorageSync(e)},this.removeStorage=e=>{var t;null===(t=this.minip)||void 0===t||t.removeStorage(e)},this.getNetworkType=()=>{const e=this;return new Promise((t=>{var i;null===(i=this.minip)||void 0===i||i.getNetworkType({success:i=>{e.network=i,t(i)},fail:()=>t(null)})}))},this.request=({url:e,data:t,header:i,timeout:n,method:s,success:r,fail:a,complete:l})=>{var u;const g=null===(u=this.minip)||void 0===u?void 0:u.request({url:e,data:t,header:i,headers:i,timeout:n,method:s,success:r,fail:a,complete:l});let c=setTimeout((()=>{(null==g?void 0:g.abort)&&o(null==g?void 0:g.abort)&&(null==g||g.abort()),clearTimeout(c),c=null}),(n||1e4)+10);return g},this.getSystemInfo=()=>{const e=this;return new Promise((t=>{var i;null===(i=this.minip)||void 0===i||i.getSystemInfo({success:i=>{e.systemInfo=i,t(i)},fail:()=>t(null)})}))},this.getSetting=()=>new Promise((e=>{var t;null===(t=this.minip)||void 0===t||t.getSetting({success:e,fail:e})}));const{platformConfig:{platform:i,scnPrefix:n}}=this.growingIO;this.platform=i,this.scnPrefix=n,this.growingIO.emitter.on("OPTION_INITIALIZED",(()=>{this.getNetworkType().then((()=>{var e;return null===(e=this.growingIO.dataStore)||void 0===e?void 0:e.eventReleaseInspector()})),this.getSystemInfo().then((()=>{var e;return null===(e=this.growingIO.dataStore)||void 0===e?void 0:e.eventReleaseInspector()}))}))}}const we=B();var be={wx:class extends Oe{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},swan:class extends Oe{constructor(e){super(e),this.growingIO=e,this.initImpression=e=>{var t,i;null===(i=null===(t=this.growingIO.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===i||i.main(e,"selectAll")},this.hookSetTitle()}},my:class extends Oe{constructor(e){super(e),this.growingIO=e,this.hookSetTitle=()=>{var e;const t=null===(e=this.minip)||void 0===e?void 0:e.setNavigationBar,i=this;t&&Object.defineProperty(this.minip,"setNavigationBar",{writable:!0,enumerable:!0,configurable:!0,value:function(){if(i.growingIO.gioSDKInitialized){const e=i.getCurrentPath(),{title:t}=arguments[0]||{};i.growingIO.dataStore.eventHooks.currentPage.settedTitle[e]=t}return t.apply(this,arguments)}})},this.initImpression=e=>{var t,i;null===(i=null===(t=this.growingIO.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===i||i.main(e,"selectAll")},this.getStorageSync=e=>{const{data:t}=my.getStorageSync({key:e});return t},this.setStorageSync=(e,t)=>{var i;null===(i=this.minip)||void 0===i||i.setStorageSync({key:e,data:t})},this.hookSetTitle()}},qq:class extends Oe{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},tt:class extends Oe{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},ks:class extends Oe{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},jd:class extends Oe{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}}}[we];let Pe;var Te={name:"gioUniAppAdapter",method:class{constructor(e){var t,i;this.growingIO=e,this.main=()=>{var e,t,i,n;if(this.uniVue||(this.uniVue=null===(t=null===(e=this.growingIO)||void 0===e?void 0:e.vdsConfig)||void 0===t?void 0:t.uniVue),console.log("Vue version: ",this.uniVue.version),null===(n=null===(i=this.growingIO)||void 0===i?void 0:i.vdsConfig)||void 0===n?void 0:n.subpackage)return!1;switch(Number.parseInt(Pe.head(Pe.split(this.uniVue.version,".")),10)){case 2:this.uniVue2Proxy(this.uniVue);break;case 3:this.uniVue3Proxy(this.uniVue);break;default:Pe.consoleText("不支持的Vue版本，请使用 Vue2 或 Vue3!","error")}},this.getHandlerName=(e,t)=>{var i;if("__e"===e){let e="__e";const{type:i,currentTarget:n,target:s}=t,o=(null==n?void 0:n.dataset)||(null==s?void 0:s.dataset);if(o){const t=o.eventOpts||o["event-opts"],n=(e,t)=>e===t||"regionchange"===t&&("begin"===e||"end"===e);t&&t.forEach((t=>{let s=Pe.head(t);const o="^"===s.charAt(0);s=o?s.slice(1):i;const r="~"===s.charAt(0);s=r?s.slice(1):i;const a=Pe.last(t);n(i,s)&&(e=Pe.head(Pe.head(a)))}))}return e}return Pe.isEmpty(this.exposedNames)?e:null!==(i=this.exposedNames[e])&&void 0!==i?i:e},this.uniVue2Proxy=e=>{const{dataStore:{eventHooks:t},minipInstance:i}=this.growingIO;t.nativeGrowing(["App","Component","Behavior"]),e.mixin({beforeMount(){if("page"===this.mpType){t.pageOverriding(this.$scope);const e=this,n=i.getPageTitle;i.getPageTitle=function(...i){var s,o,r;return(e.$scope.route===t.currentPage.path?null===(r=null===(o=null===(s=e.$scope)||void 0===s?void 0:s.$vm)||void 0===o?void 0:o._data)||void 0===r?void 0:r.gioPageTitle:void 0)||n.apply(this,i)}}}})},this.uniVue3Proxy=e=>{const{dataStore:{eventHooks:t},minipInstance:i}=this.growingIO;t.nativeGrowing();const n=i.getPageTitle;i.getPageTitle=function(...e){var t,s,o;let r=Pe.isEmpty(e[0])?i.getCurrentPage():e[0];if("page"===(null===(t=null==r?void 0:r.$vm)||void 0===t?void 0:t.mpType)&&(null===(s=null==r?void 0:r.$vm)||void 0===s?void 0:s.__route__)){return(null===(o=null==r?void 0:r.$vm)||void 0===o?void 0:o.gioPageTitle)||n.apply(this,e)}return n.apply(this,e)};const s=this;e.mixin({beforeMount(){var e,i;const n=(e,i)=>Pe.isFunction(i)&&!t.pageHandlers.includes(e)?function(...n){return t.customFcEffects(e,i).apply(this,n)}:i,o=(e,t)=>Pe.keys(e).forEach((e=>{Pe.isFunction(t[e])&&Object.defineProperty(t,e,{value:n(e,t[e]),configurable:!0,writable:!0})})),r=this.$options.methods;r&&o(r,this);const a=null===(e=null==this?void 0:this._)||void 0===e?void 0:e.setupState;a&&o(a,a);const l=null===(i=null==this?void 0:this._)||void 0===i?void 0:i.exposed;if(s.exposedNames={},l){const e=Pe.keys(l);e.forEach((e=>{Pe.isFunction(l[e])&&(s.exposedNames[l[e].name]=e)})),Pe.keys(this.$scope).filter((e=>/^e[0-9]+$/.test(e)&&Pe.isFunction(this.$scope[e]))).forEach(((i,n)=>{const o=this.$scope[i].value,r=s.splicingMethodName(o.name,i,e[n]);this.$scope[i].value=t.customFcEffects(r,o)}))}const u=this._.emit;this._.emit=function(...e){return(()=>{t.customFcEffects(e[0],(()=>{})).apply(this,e)})(),u.apply(this,e)}}})},this.splicingMethodName=(e,t,i)=>e||(i?`${t}#${i}`:t),Pe=this.growingIO.utils,this.uniVue=null===(i=null===(t=this.growingIO)||void 0===t?void 0:t.vdsConfig)||void 0===i?void 0:i.uniVue,this.exposedNames={}}}};let _e;const Ce={};function ke(e,t,i){var n=e;t.map((function(e,s){n[e]=s==t.length-1?i:n[e]||{},n=n[e]}))}ke(Ce,["pluginsIn","gioCustomTracking"],{name:"gioCustomTracking",method:class{constructor(e){this.growingIO=e,this.getDynamicAttributes=e=>(_e.isNil(e)||_e.keys(e).forEach((t=>{_e.isFunction(e[t])?e[t]=e[t]():_e.isArray(e[t])||(e[t]=_e.toString(e[t]))})),e),this.buildCustomEvent=(e,t)=>{_e.eventNameValidate(e,(()=>{const{dataStore:{eventContextBuilder:i,eventInterceptor:n}}=this.growingIO;n(Object.assign({eventType:"CUSTOM",eventName:e,attributes:_e.limitObject(this.getDynamicAttributes(_e.isObject(t)&&!_e.isEmpty(t)?t:void 0))},i()))}))},this.buildUserAttributesEvent=e=>{const{dataStore:{eventContextBuilder:t,eventInterceptor:i,lastVisitEvent:n}}=this.growingIO,s=Object.assign({eventType:"LOGIN_USER_ATTRIBUTES",attributes:_e.limitObject(e)},t());s.path||(s.path=n.path,s.query=n.query,s.title=n.title),i(s)},_e=this.growingIO.utils}}}),ke(Ce,["pluginsIn","gioUniAppAdapter"],Te);class Ee{constructor(e){this.growingIO=e,this.innerPluginInit=()=>{I(Ce.pluginsIn).forEach((e=>{const{name:t,method:i}=Ce.pluginsIn[e];this.pluginItems.find((e=>e.name===t))||this.pluginItems.push({name:p(t||e),method:i||(e=>{})})})),P(this.pluginItems)||this.installAll()},this.install=(e,t,i)=>{var n;const s=t||this.pluginItems.find((t=>t.name===e));if(null===(n=this.growingIO)||void 0===n?void 0:n.plugins[e])return C(`重复加载插件 ${e} 或插件重名，已跳过加载!`,"warn"),!1;if(!s)return C(`插件加载失败!不存在名为 ${e} 的插件!`,"error"),!1;try{return this.growingIO.plugins[e]=new s.method(this.growingIO,i),t&&C("加载插件："+e,"info"),!0}catch(t){return C(`插件【${e}】加载异常 ${t}`,"error"),!1}},this.installAll=e=>{(e||this.pluginItems).forEach((t=>this.install(t.name,e?t:void 0,t.options)))},this.uninstall=e=>{var t;w(this.pluginItems,e);const i=w(null===(t=this.growingIO)||void 0===t?void 0:t.plugins,e);return i||C(`卸载插件 ${e} 失败!`,"error"),i},this.uninstallAll=()=>{this.pluginItems.forEach((e=>this.uninstall(e.name)))},this.lifeError=(e,t)=>C(`插件执行错误 ${e.name} ${t}`,"error"),this.onComposeBefore=e=>{this.pluginItems.forEach((t=>{var i;const n=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onComposeBefore;if(n&&o(n))try{n(e)}catch(e){this.lifeError(t,e)}}))},this.onComposeAfter=e=>{this.pluginItems.forEach((t=>{var i;const n=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onComposeAfter;if(n&&o(n))try{n(e)}catch(e){this.lifeError(t,e)}}))},this.onSendBefore=e=>{this.pluginItems.forEach((t=>{var i;const n=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onSendBefore;if(n&&o(n))try{n(e)}catch(e){this.lifeError(t,e)}}))},this.onSendAfter=e=>{this.pluginItems.forEach((t=>{var i;const n=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onSendAfter;if(n&&o(n))try{n(e)}catch(e){this.lifeError(t,e)}}))},this.pluginItems=[],this.growingIO.emitter.on("onComposeBefore",this.onComposeBefore),this.growingIO.emitter.on("onComposeAfter",this.onComposeAfter),this.growingIO.emitter.on("onSendBefore",this.onSendBefore),this.growingIO.emitter.on("onSendAfter",this.onSendAfter)}}var Ae={},je={}.hasOwnProperty;function xe(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function Ne(e){try{return encodeURIComponent(e)}catch(e){return null}}Ae.stringify=function(e,t){t=t||"";var i,n,s=[];for(n in"string"!=typeof t&&(t="?"),e)if(je.call(e,n)){if((i=e[n])||null!=i&&!isNaN(i)||(i=""),n=Ne(n),i=Ne(i),null===n||null===i)continue;s.push(n+"="+i)}return s.length?t+s.join("&"):""},Ae.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,n={};t=i.exec(e);){var s=xe(t[1]),o=xe(t[2]);null===s||null===o||s in n||(n[s]=o)}return n};class qe{constructor(e){this.growingIO=e,this.generateURL=()=>{const{serverUrl:e,projectId:t}=this.growingIO.vdsConfig;return v(e,"http")?`${e}/v3/projects/${t}/collect`:`https://${e}/v3/projects/${t}/collect`},this.commitRequest=e=>{const t=Object.assign({},e),{vdsConfig:i}=this.growingIO;i.forceLogin?this.hoardingQueue.push(t):(this.requestQueue.push(t),this.initiateRequest())},this.initiateRequest=e=>{var t,i;const{plugins:n,vdsConfig:s}=this.growingIO;[...this.hoardingQueue,...this.requestQueue].length>0&&this.requestingNum<this.requestLimit&&((null===(t=null==s?void 0:s.tbConfig)||void 0===t?void 0:t.cloudFuncSend)?null===(i=null==n?void 0:n.gioTaobaoAdapter)||void 0===i||i.singleInvoke():e?this.batchInvoke():this.batchInvokeThrottle())},this.batchInvoke=()=>{var e,t;const{vdsConfig:i,plugins:n,emitter:s}=this.growingIO;let o=[...this.hoardingQueue,...this.requestQueue];o.length>50?(o=o.slice(0,50),this.hoardingQueue.length>50?this.hoardingQueue=this.hoardingQueue.slice(50):(this.requestQueue=this.requestQueue.slice(50-this.hoardingQueue.length),this.hoardingQueue=[])):(this.hoardingQueue=[],this.requestQueue=[]);let r=o.filter((e=>(this.retryIds[e.requestId]||0)<=this.retryLimit));if(P(r))return;const a=r.map((e=>{const t=Object.assign({},e);return w(t,"requestId"),t}));i.debug&&console.log("[GrowingIO Debug]:",JSON.stringify(a,null,2)),s.emit("onSendBefore",{requestData:a}),(null===(e=null==i?void 0:i.tbConfig)||void 0===e?void 0:e.cloudAppId)?null===(t=null==n?void 0:n.gioTaobaoAdapter)||void 0===t||t.tbCloudAppInvoke(a):this.normalBatchInvoke(r,a)},this.batchInvokeThrottle=b(this.batchInvoke,this.growingIO.vdsConfig.uploadInterval,!1,!1),this.normalBatchInvoke=(e,t)=>{var i;const{minipInstance:n,vdsConfig:s,emitter:o,plugins:a}=this.growingIO;this.requestingNum+=1;const l={"content-type":"jdp"===n.platform?"application/json":"application/json;charset=UTF-8"};let u=[...t];const g=s.compress&&(null===(i=null==a?void 0:a.gioCompress)||void 0===i?void 0:i.compressToUTF16);g&&(u=a.gioCompress.compressToUTF16(JSON.stringify(t)),l["X-Compress-Codec"]="1"),n.request({url:`${this.requestURL}?stm=${Date.now()}&compress=${g?"1":"0"}`,header:l,method:"POST",data:u,timeout:s.requestTimeout,fail:t=>{[200,204].includes(t.code)||(r(e)?e.forEach((e=>{this.requestFailFn(e)})):this.requestFailFn(e),C("请求失败!"+JSON.stringify(t),"error"))},complete:e=>{this.requestingNum-=1,o.emit("onSendAfter",{result:e}),this.initiateRequest()}})},this.requestFailFn=e=>{if(this.retryIds[e.requestId]||(this.retryIds[e.requestId]=0),this.retryIds[e.requestId]+=1,!this.requestQueue.some((t=>t.requestId===e.requestId))){let t=setTimeout((()=>{P(this.requestQueue)?(this.requestQueue.push(e),this.initiateRequest()):this.requestQueue.push(e),clearTimeout(t),t=null}),800)}},this.hoardingQueue=[],this.requestQueue=[],this.requestLimit=3,this.retryLimit=2,this.retryIds={},this.requestingNum=0,this.requestURL=this.generateURL()}}class $e{constructor(e){var t;this.growingIO=e,this.initUserInfo=()=>{var e;const{minipInstance:t}=this.growingIO,i=[this.uidStorageName,this.userIdStorageName,this.userKeyStorageName,this.gioIdStorageName],n=null!==(e=M(t,i))&&void 0!==e?e:[];["_uid","_userId","_userKey","_gioId"].forEach(((e,t)=>{this[e]=n[t],"_uid"!==e||this[e]||(this.uid=x())}))},this.saveUserInfo=()=>{const{minipInstance:e}=this.growingIO;G(e,[{key:this.uidStorageName,value:this.uid},{key:this.userIdStorageName,value:this.userId},{key:this.userKeyStorageName,value:this.userKey},{key:this.gioIdStorageName,value:this.gioId}])};const{inPlugin:i}=this.growingIO;this.uidStorageName=i?"_growing_plugin_uid_":"_growing_uid_",this.userIdStorageName=i?"_growing_plugin_userId_":"_growing_userId_",this.userKeyStorageName=i?"_growing_plugin_userKey_":"_growing_userKey_",this.gioIdStorageName=i?"_growing_plugin_gioId_":"_growing_gioId_",this._sessionId=x(),this._uid=void 0,this._userId=void 0,this._userKey=void 0,this._gioId=void 0,"quickapp"!==(null===(t=this.growingIO)||void 0===t?void 0:t.gioPlatform)&&this.initUserInfo()}get sessionId(){return this._sessionId||(this._sessionId=x()),this._sessionId}set sessionId(e){const t=this._sessionId;this._sessionId=e||x(),t!==this._sessionId&&this.growingIO.emitter.emit("SESSIONID_UPDATE",{newSessionId:this._sessionId,oldSessionId:t})}get uid(){return this._uid}set uid(e){const t=this._uid;this._uid=e,t!==this._uid&&(this.growingIO.minipInstance.setStorage(this.uidStorageName,this._uid),this.growingIO.emitter.emit("UID_UPDATE",{newUId:e,oldUId:t}))}get userId(){return this._userId}set userId(e){const t=this._userId;this._userId=e,t!==this._userId&&(this.growingIO.minipInstance.setStorage(this.userIdStorageName,this._userId),this.growingIO.emitter.emit("USERID_UPDATE",{newUserId:e,oldUserId:t})),e&&(this.gioId=e)}get userKey(){return this._userKey}set userKey(e){const t=this._userKey;this._userKey=e,t!==this._userKey&&(this.growingIO.minipInstance.setStorage(this.userKeyStorageName,this._userKey),this.growingIO.emitter.emit("USERKEY_UPDATE",{newUserKey:e,oldUserKey:t}))}get gioId(){return this._gioId}set gioId(e){const t=this._gioId;this._gioId=e,t!==this._gioId&&(this.growingIO.minipInstance.setStorage(this.gioIdStorageName,this._gioId),this.growingIO.emitter.emit("GIOID_UPDATE",{newGioId:e,oldGioId:t}))}}const De=new class{constructor(){var t;this.registerPlugins=e=>{this.plugins.pluginItems=[...this.plugins.pluginItems,...e],this.plugins.installAll(e)},this.init=e=>{var t;return C("Gio小程序SDK 初始化中...","info"),this.dataStore.initOptions(e),null===(t=this.emitter)||void 0===t||t.emit("OPTION_INITIALIZED",this),this.gioSDKInitialized=!0,this.vdsConfig.subpackage||(R().__gio__=()=>this),this.uploader=new qe(this),this.vdsConfig.idMapping||(this.userStore.userKey=""),this.emitter.emit("SDK_INITIALIZED",this),C("Gio小程序SDK 初始化完成！","success"),this.vdsConfig.forceLogin&&C("forceLogin已开启，请调用 identify 方法设置 openId 以继续上报!","info"),this.inPlugin&&"tbp"!==this.minipInstance.platform&&this.dataStore.sendVisit(),!0},this.getOption=e=>this.dataStore.getOption(e),this.setOption=(e,t)=>{if(I(X).includes(e)){const i=this.dataStore.setOption(e,t);return i&&X[e]&&C(`已${t?"开启":"关闭"}${X[e]}`,"info"),i}return C(`不存在可修改的配置项：${e}，请检查后重试!`,"warn"),!1},this.getDeviceId=()=>this.userStore.uid,this.identify=e=>{if(this.vdsConfig.forceLogin){if(!J(e))return void k("identify");const t=h(e).slice(0,1e3);this.userStore.uid=t,this.uploader.hoardingQueue.forEach(((e,i)=>this.uploader.hoardingQueue[i].deviceId=t)),this.dataStore.setOption("forceLogin",!1),this.uploader.initiateRequest(!0)}else k("identify",!1,"forceLogin未开启")},this.setUserId=(t,i)=>{if(J(t)){const n=this.userStore.gioId;if(t=h(t).slice(0,1e3),i=h(i).slice(0,1e3),this.userStore.userId=t,this.vdsConfig.idMapping&&(this.userStore.userKey=e(i)?"":i),n&&n!==t){this.userStore.sessionId="";const{path:e,query:t,settedTitle:i}=this.dataStore.eventHooks.currentPage;this.dataStore.eventHooks.currentPage.title=i[e]||this.minipInstance.getPageTitle(this.minipInstance.getCurrentPage()),this.dataStore.sendVisit({path:e,query:t})}}else k("setUserId")},this.clearUserId=()=>{this.userStore.userId=void 0,this.userStore.userKey=void 0},this.setUserAttributes=e=>{var t,i;!P(e)&&s(e)?null===(i=null===(t=this.plugins)||void 0===t?void 0:t.gioCustomTracking)||void 0===i||i.buildUserAttributesEvent(e):k("setUserAttributes")},this.track=(e,t)=>{var i,n;((null===(n=null===(i=this.plugins)||void 0===i?void 0:i.gioCustomTracking)||void 0===n?void 0:n.buildCustomEvent)||function(){})(e,Object.assign(Object.assign({},this.dataStore.generalProps),s(t)&&!P(t)?t:{}))},this.trackTimerStart=e=>!!this.vdsConfig.dataCollect&&j(e,(()=>{const t=x();return this.dataStore.trackTimers[t]={eventName:e,leng:0,start:+Date.now()},t})),this.trackTimerPause=e=>{if(e&&this.dataStore.trackTimers[e]){const t=this.dataStore.trackTimers[e];return t.start&&(t.leng=t.leng+(+Date.now()-t.start)),t.start=0,!0}return!1},this.trackTimerResume=e=>{if(e&&this.dataStore.trackTimers[e]){const t=this.dataStore.trackTimers[e];return 0===t.start&&(t.start=+Date.now()),!0}return!1},this.trackTimerEnd=(e,t)=>{if(this.vdsConfig.dataCollect){const i=864e5;if(e&&this.dataStore.trackTimers[e]){const n=this.dataStore.trackTimers[e];if(0!==n.start){const e=+Date.now()-n.start;n.leng=e>0?n.leng+e:0}const{eventContextBuilder:s,eventInterceptor:o}=this.dataStore;return o(Object.assign({eventType:"CUSTOM",eventName:n.eventName,attributes:K(Object.assign(Object.assign({},t),{event_duration:n.leng>i?0:n.leng/1e3}))},s())),this.removeTimer(e),!0}return C("未查找到对应的计时器，请检查!","error"),!1}return!1},this.removeTimer=e=>!(!e||!this.dataStore.trackTimers[e]||(delete this.dataStore.trackTimers[e],0)),this.clearTrackTimer=()=>{this.dataStore.trackTimers={}},this.setGeneralProps=e=>{s(e)&&!P(e)?(this.dataStore.generalProps=Object.assign(Object.assign({},this.dataStore.generalProps),e),I(this.dataStore.generalProps).forEach((e=>{[void 0,null].includes(this.dataStore.generalProps[e])&&(this.dataStore.generalProps[e]="")}))):k("setGeneralProps")},this.clearGeneralProps=e=>{r(e)&&!P(e)?e.forEach((e=>{w(this.dataStore.generalProps,e)})):this.dataStore.generalProps={}},this.setPageAttributes=e=>{const{currentPage:t}=this.dataStore.eventHooks,i=this.minipInstance.getCurrentPath();["onLoad","attached"].includes(t.currentLifecycle)&&(t.pageProps[i]=K(e))},this.updateImpression=()=>{C("当前未集成半自动浏览插件，请集成插件后再调用 updateImpression!","warn")},this.setLocation=(e,t)=>{const i={latitude:e,longitude:t},n=this.dataStore.locationData,s=e=>e>=-180&&180>=e;s(e)&&s(t)&&(n.latitude!==e||n.longitude!==t)&&(this.dataStore.locationData=i)},this.getGioInfo=()=>{const{uid:e,userId:t,userKey:i,sessionId:n}=this.userStore,{projectId:s,appId:o,dataSourceId:r,dataCollect:a,idMapping:l,extraParams:u,ignoreFields:g}=this.vdsConfig,c={gioappid:o,giocs1:t||"",gioplatform:this.platformConfig.platform,gioprojectid:s,gios:n,giou:e};return c.giodatacollect=a,c.giodatasourceid=r,l&&(c.giouserkey=i),P(u)||u.forEach((e=>{g.includes(e)||(c["gio"+e]=this.dataStore.lastVisitEvent[e])})),Ae.stringify(c)},this.utils=Object.assign(Object.assign(Object.assign({},_),z),{qs:Ae}),this.emitter={all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map((function(e){e(i)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,i)}))}},this.gioPlatform=B(),this.gioFramework="uniapp",this.sdkVersion="4.0.1";try{"quickapp"===this.gioPlatform||o(getApp)&&o(App)?this.inPlugin=!1:this.inPlugin=!0}catch(e){this.inPlugin=!0}this.inPlugin&&C("未检测到小程序实例，自动切换为插件模式!","info"),this.platformConfig=ye,this.minipInstance=new be(this),this.dataStore=new ue(this),this.userStore=new $e(this),this.plugins=new Ee(this),this.plugins.innerPluginInit()}},He=function(){const e=arguments[0];if(t(e)&&Z.includes(e)&&De[e]){const n=u(Array.from(arguments));if("init"===e){const e=!(i=De).vdsConfig&&!i.gioSDKInitialized||(C("SDK重复初始化，请检查是否重复加载SDK或接入其他平台SDK导致冲突!","warn"),!1),o=(e=>!!g(e)||(C('SDK初始化失败，请使用 gdp("init", "您的GrowingIO项目 accountId", "您项目的 dataSourceId", "你的应用 AppId", options); 进行初始化!',"error"),!1))(n),r=(e=>{const t=e[0];let i=l(e);return J(t)?(s(i)&&i||(i={}),{projectId:t,userOptions:i}):(C("SDK初始化失败，accountId 参数不合法!","error"),!1)})(n),a=(e=>{const i=e[1];let n=e[2];const s=l(e);return i&&t(i)?J(n)?{dataSourceId:i,appId:n,options:s}:(C("SDK初始化失败，appId 参数不合法!","error"),!1):(C("SDK初始化失败，dataSourceId 参数不合法!","error"),!1)})(n);if(e&&o&&r&&a){const{projectId:e}=r,{dataSourceId:t,appId:i,options:n}=a;return De.init(Object.assign(Object.assign({},n),{projectId:e,dataSourceId:t,appId:i}))}}else if("registerPlugins"===e)De.registerPlugins(n[0]);else{if(De.gioSDKInitialized&&De.vdsConfig)return De[e](...n);C("SDK未初始化!","error")}}else ee.includes(e)?C(`方法 ${h(e)} 已被弃用!`,"warn"):C(`不存在名为 ${h(e)} 的方法调用!`,"error");var i};V().gdp=He,V().gioSDKVersion=De.sdkVersion;const Ue=E((()=>{var e;return null!==(e=De.dataStore.eventHooks.growingApp)&&void 0!==e?e:App})),Fe=E((()=>{var e;return null!==(e=De.dataStore.eventHooks.growingPage)&&void 0!==e?e:Page})),Be=E((()=>{var e;return null!==(e=De.dataStore.eventHooks.growingComponent)&&void 0!==e?e:Component})),Le=E((()=>{var e;return null!==(e=De.dataStore.eventHooks.growingBehavior)&&void 0!==e?e:Behavior}));export default He;export{Ue as GioApp,Le as GioBehavior,Be as GioComponent,Fe as GioPage};
