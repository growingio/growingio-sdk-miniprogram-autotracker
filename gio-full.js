const e={autotrack:{type:"boolean",default:!0},cml:{type:"object",default:!1},dataCollect:{type:"boolean",default:!0},debug:{type:"boolean",default:!1},followShare:{type:"boolean",default:!0},forceLogin:{type:"boolean",default:!1},subpackage:{type:"boolean",default:!1},keepAlive:{type:"number",default:3e5},remax:{type:["object","module"],default:!1},taro:{type:["object","module"],default:!1},taroVue:{type:["object","function"],default:!1},tbConfig:{type:"object",default:{cloudFuncSend:!1,cloudFuncName:"httpTunnel",cloudFuncHandler:"main",cloudAppId:void 0,path:void 0}},uniVue:{type:["object","function"],default:!1},version:{type:"string",default:"1.0.0"},wepy:{type:"function",default:!1}},t={compress:{type:"boolean",default:!0},enableIdMapping:{type:"boolean",default:!1},extraParams:{type:"array",default:[]},gtouchHost:{type:"string",default:"cdp.growingio.com"},host:{type:"string",default:"napi.growingio.com"},ignoreFields:{type:"array",default:[]},scheme:{type:"string",default:"https"},uploadInterval:{type:"number",default:1e3},performance:{type:"object",default:{monitor:!0,exception:!0}}},i={},s=["clearUserId","enableDebug","getGioInfo","getOption","identify","init","setAutotrack","setDataCollect","setOption","setUserId","track","setLocation","setGeneralProps","clearGeneralProps","setPageAttributes","updateImpression","setTrackerHost","setTrackerScheme","setUserAttributes","registerPlugins","getDeviceId","trackTimerStart","trackTimerPause","trackTimerResume","trackTimerEnd","removeTimer","clearTrackTimer"],n=["autotrack","dataCollect","debug","host","scheme"],o={autotrack:"无埋点",dataCollect:"数据采集",debug:"调试模式"},r=["setConfig","collectImp","setPlatformProfile","getLocation"],a=["deviceBrand","deviceModel","deviceType","networkState","screenHeight","screenWidth","operatingSystem"],l=[...a,"appChannel","language","platformVersion"],g=e=>["undefined","null"].includes(H(e)),u=e=>"string"===H(e),d=e=>"number"===H(e),c=e=>"boolean"===H(e),h=e=>"[object Object]"==={}.toString.call(e)&&!g(e),p=e=>"function"===H(e),v=e=>Array.isArray(e)&&"array"===H(e),m=e=>{try{return Array.from(e)[0]}catch(e){return}},f=e=>{try{const t=Array.from(e);return t[t.length-1]}catch(e){return}},I=(e,t=1)=>v(e)&&d(t)?e.slice(t>0?t:1,e.length):e,y=e=>{if(v(e)){let t=0;const i=[];for(const s of e)s&&!q(s)&&(i[t++]=s);return i}return e},w=(e,t)=>{if(v(e)){const i=e.findIndex(t);return 0>i?void 0:e[i]}},O=e=>g(e)?"":""+e,S=(e,t)=>"string"===H(e)?e.split(t):e,b=e=>{if(u(e)){const t=S(e,"");return`${m(t).toLowerCase()}${I(t).join("")}`}return e},T=(e,t)=>e.slice(0,t.length)===t,_=(e,t)=>{const{length:i}=e;let s=i;s>i&&(s=i);const n=s;return s-=t.length,s>=0&&e.slice(s,n)===t},P={}.hasOwnProperty,k=(e,t)=>!g(e)&&P.call(e,t),C=e=>h(e)?Object.keys(e):[],E=(e,t)=>{C(e).forEach((i=>t(e[i],i)))},x=(e,t)=>{const i=C(e);return!(!h(e)||!h(t)||i.length!==C(t).length||i.map(((i,s)=>h(e[i])?x(e[i],t[i]):e[i]===t[i])).includes(!1))},A=(e,t,i)=>{let s=e;return h(e)?(t.split(".").forEach((e=>{s=s?s[e]:i})),s):i},N=(e,t)=>{if(!h(e))return!1;try{if("string"===H(t))return delete e[t];if("array"===H(t))return t.map((t=>delete e[t]));"object"===H(t)&&t.constructor===RegExp&&C(e).forEach((i=>{t.test(i)&&N(e,i)}))}catch(e){return!1}},j=(e,t=250,i,s)=>{let n,o=0;return"boolean"!==H(i)&&(s=e,e=i,i=void 0),function(...r){let a=this,l=Date.now()-o;function g(){o=Date.now(),e.apply(a,r)}s&&!n&&g(),n&&clearTimeout(n),void 0===s&&l>t?g():!0!==i&&(n=setTimeout(s?function(){n=void 0}:g,void 0===s?t-l:t))}},q=e=>v(e)?0===e.length:h(e)?0===C(e).length:!e,H=e=>({}.toString.call(e).slice(8,-1).toLowerCase());var V=Object.freeze({__proto__:null,isNil:g,isString:u,isNumber:d,isBoolean:c,isObject:h,isRegExp:e=>"[object RegExp]"==={}.toString.call(e),isFunction:p,isArray:v,isDate:e=>"date"===H(e),fixed:(e,t)=>d(e)?Number(e.toFixed(d(t)?t:2)):u(e)&&"NaN"!==O(Number(e))?Number(Number(e).toFixed(d(t)?t:2)):e,head:m,last:f,drop:I,dropWhile:(e,t)=>v(e)?e.filter((e=>!t(e))):e,compact:y,find:w,toString:O,split:S,lowerFirst:b,upperFirst:e=>{if(u(e)){const t=S(e,"");return`${m(t).toUpperCase()}${I(t).join("")}`}return e},startsWith:T,endsWith:_,hasOwnProperty:P,has:k,keys:C,forEach:E,isEqual:x,get:A,unset:N,throttle:j,isEmpty:q,typeOf:H,formatDate:e=>{function t(e){return 10>e?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}});const $=(e,t)=>{console.log("%c[GrowingIO]："+e,{info:"color: #3B82F6;",error:"color: #EF4444",warn:"color: #F59E0B",success:"color: #10B981"}[t]||"")},F=e=>{try{return e()}catch(e){return}},D=e=>u(e)?e.trim().substring(0,100):e,L=(e,t)=>u(e)&&!q(e)&&e.match(/^[a-zA-Z_][0-9a-zA-Z_]{0,100}$/)?t():($("事件名格式不正确，只能包含数字、字母和下划线，且不能以数字开头，字符总长度不能超过100!","error"),!1),R=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),M=e=>e.pixelRatio?Math.round(e.screenHeight*e.pixelRatio):e.screenHeight,B=e=>e.pixelRatio?Math.round(e.screenWidth*e.pixelRatio):e.screenWidth,U=(e,t)=>{if(e){const i=e.toLowerCase();return-1!==i.indexOf("android")?t+"-Android":-1!==i.indexOf("ios")?t+"-iOS":e}},K=(e="",t="")=>{const i=e=>e.replace(/\s+/g,""),s=e=>e.replace(/[vV]/g,""),n=i(s(e)),o=i(s(t)),r=n.split("."),a=o.split(".");for(let e=0;3>e;e++){let t=Number(r[e]),i=Number(a[e]);if(t>i)return 1;if(i>t)return-1;if(!isNaN(t)&&isNaN(i))return 1;if(isNaN(t)&&!isNaN(i))return-1}return 0},G=e=>{if(e){const t=Number.parseInt(m(S(e.version,".")),10);return Number.isNaN(t)?0:t}return 0},Q=e=>{if(u(e)){const t=e.indexOf("?");return-1!==t?[e.substring(0,t),e.substring(t+1)]:[e,""]}return["",""]},W=e=>u(e)?e.startsWith("/")?e:"/"+e:"",z=e=>{const{Current:t,createComponent:i}=e;return!(!e||!t||i)},X=e=>F((()=>{switch(e){case"wx":return wx;case"my":return my;case"swan":return swan;case"tt":return tt;case"qq":return qq;case"ks":return ks;case"jd":return jd;default:{let e;return e||(e=F((()=>swan))),e||(e=F((()=>my))),e||(e=F((()=>tt))),e||(e=F((()=>qq))),e||(e=F((()=>ks))),e||(e=F((()=>jd))),e||(e=F((()=>wx))),e}}})),J=e=>F((()=>{switch(e){case"wx":return __wxConfig;case"my":return __myConfig;case"swan":return appConfig;case"tt":return __ttConfig;case"qq":return __qqConfig;case"ks":return __ksConfig;case"jd":return __jdConfig;default:return}})),Z=()=>{let e;return!e&&F((()=>swan))&&(e="swan"),!e&&F((()=>tt))&&(e="tt"),!e&&F((()=>qq))&&(e="qq"),!e&&F((()=>my))&&(e="my"),!e&&F((()=>ks))&&(e="ks"),!e&&F((()=>jd))&&(e="jd"),!e&&F((()=>wx))&&(e="wx"),e||w(C(global),(e=>O(e).toLowerCase().includes("quickapp")))&&(e="quickapp"),e},Y=e=>C(e).filter((e=>e.indexOf("__sub")>-1&&e.indexOf("gio__")>-1)).sort(),ee=()=>{let e=F((()=>getApp({allowDefault:!0})));return e||(e=te()),e},te=()=>{var e;return null!==(e=F((()=>$global)))&&void 0!==e?e:global},ie=e=>{const t={};return h(e)&&E(e,((e,i)=>{const s=O(i).slice(0,100);h(e)?t[s]=ie(e):v(e)?(t[s]=e.slice(0,100),"cdp"===te().gioEnvironment?t[s]=t[s].join("||").slice(0,1e3):t[s]=O(t[s]).slice(0,1e3)):t[s]=g(e)?"":O(e).slice(0,1e3)})),t},se=(e,t)=>{const i=()=>t.map((t=>e.getStorageSync(t)));try{return e.minip.canIUse("batchGetStorageSync")?e.minip.batchGetStorageSync(t):i()}catch(e){return i()}},ne=(e,t)=>{const i=()=>t.map((({key:t,value:i})=>e.setStorageSync(t,i)));try{return e.minip.canIUse("batchSetStorageSync")?e.minip.batchSetStorageSync(t):i()}catch(e){return i()}},oe=e=>C(e||{}).map((t=>t?`${t}=${g(e[t])?"":e[t]}`:"")).join("&"),re=e=>{(T(e,"?")||T(e,"&"))&&(e=e.slice(1,e.length));const t={};return e.split("&").forEach((e=>{const i=e.split("=");i[0]&&(t[i[0]]=i[1])})),t};var ae=Object.freeze({__proto__:null,consoleText:$,niceTry:F,limitString:D,eventNameValidate:L,guid:R,getScreenHeight:M,getScreenWidth:B,getOS:U,compareVersion:K,getVueVersion:G,splitPath:Q,normalPath:W,isTaro3:z,getPlainMinip:X,getPlainConfig:J,getPlainPlatform:Z,getSubKeys:Y,getAppInst:ee,getGlobal:te,limitObject:ie,batchGetStorageSync:se,batchSetStorageSync:ne,qsStringify:oe,qsParse:re});const le=e=>u(e)&&e.length>0||d(e)&&e>0,ge=/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/i,ue=/^(https?:\/\/)|(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i;let de;var ce={name:"gioUniAppAdapter",method:class{constructor(e){var t,i;this.growingIO=e,this.main=()=>{var e,t,i,s;if(this.uniVue||(this.uniVue=null===(t=null===(e=this.growingIO)||void 0===e?void 0:e.vdsConfig)||void 0===t?void 0:t.uniVue),console.log("Vue version: ",this.uniVue.version),null===(s=null===(i=this.growingIO)||void 0===i?void 0:i.vdsConfig)||void 0===s?void 0:s.subpackage)return!1;switch(Number.parseInt(de.head(de.split(this.uniVue.version,".")),10)){case 2:this.uniVue2Proxy(this.uniVue);break;case 3:this.uniVue3Proxy(this.uniVue);break;default:de.consoleText("不支持的Vue版本，请使用 Vue2 或 Vue3!","error")}},this.getHandlerName=(e,t)=>{var i;if("__e"===e){let e="__e";const{type:i,currentTarget:s,target:n}=t,o=(null==s?void 0:s.dataset)||(null==n?void 0:n.dataset);if(o){const t=o.eventOpts||o["event-opts"],s=(e,t)=>e===t||"regionchange"===t&&("begin"===e||"end"===e);t&&t.forEach((t=>{let n=de.head(t);const o="^"===n.charAt(0);n=o?n.slice(1):i;const r="~"===n.charAt(0);n=r?n.slice(1):i;const a=de.last(t);s(i,n)&&(e=de.head(de.head(a)))}))}return e}return de.isEmpty(this.exposedNames)?e:null!==(i=this.exposedNames[e])&&void 0!==i?i:e},this.uniVue2Proxy=e=>{const{dataStore:{eventHooks:t},gioPlatform:i,minipInstance:s}=this.growingIO;"swan"===i?App=function(...e){return t.growingApp(e[0])}:t.nativeGrowing(),e.mixin({beforeMount(){if("page"===this.mpType){t.pageOverriding(this.$scope);const e=this,i=s.getPageTitle;s.getPageTitle=function(...s){var n,o,r;return(e.$scope.route===t.currentPage.path?null===(r=null===(o=null===(n=e.$scope)||void 0===n?void 0:n.$vm)||void 0===o?void 0:o._data)||void 0===r?void 0:r.gioPageTitle:void 0)||i.apply(this,s)}}}})},this.uniVue3Proxy=e=>{const{dataStore:{eventHooks:t},minipInstance:i}=this.growingIO;t.nativeGrowing();const s=i.getPageTitle;i.getPageTitle=function(...e){var t,n,o;let r=de.isEmpty(e[0])?i.getCurrentPage():e[0];if("page"===(null===(t=null==r?void 0:r.$vm)||void 0===t?void 0:t.mpType)&&(null===(n=null==r?void 0:r.$vm)||void 0===n?void 0:n.__route__)){return(null===(o=null==r?void 0:r.$vm)||void 0===o?void 0:o.gioPageTitle)||s.apply(this,e)}return s.apply(this,e)};const n=this;e.mixin({beforeMount(){var e,i,s;const o=(e,i)=>de.isFunction(i)&&!t.pageHandlers.includes(e)?function(...s){return t.customFcEffects(e,i).apply(this,s)}:i,r=e=>de.keys(e).forEach((e=>{Object.defineProperty(this,e,{value:o(e,this[e]),configurable:!0,writable:!0})})),a=this.$options.methods;a&&r(a);const l=null===(e=null==this?void 0:this._)||void 0===e?void 0:e.setupState;l&&r(l);const g=null!==(s=null===(i=null==this?void 0:this._)||void 0===i?void 0:i.exposed)&&void 0!==s?s:{};n.exposedNames={},g&&(de.keys(g).forEach((e=>{de.isFunction(g[e])&&(n.exposedNames[g[e].name]=e)})),de.keys(this.$scope).filter((e=>/^e[0-9]+$/.test(e)&&de.isFunction(this.$scope[e]))).forEach((e=>{const i=this.$scope[e].value;this.$scope[e].value=t.customFcEffects(i.name,i)})));const u=this._.emit;this._.emit=function(...e){return(()=>{t.customFcEffects(e[0],(()=>{})).apply(this,e)})(),u.apply(this,e)}}})},de=this.growingIO.utils,this.uniVue=null===(i=null===(t=this.growingIO)||void 0===t?void 0:t.vdsConfig)||void 0===i?void 0:i.uniVue,this.exposedNames={}}}};let he;var pe={name:"gioTaroAdapter",method:class{constructor(e){var t,i,s,n;this.growingIO=e,this.main=()=>{var e,t,i,s;this.taro||(this.taro=null===(t=null===(e=this.growingIO)||void 0===e?void 0:e.vdsConfig)||void 0===t?void 0:t.taro),this.vue||(this.vue=null===(s=null===(i=this.growingIO)||void 0===i?void 0:i.vdsConfig)||void 0===s?void 0:s.taroVue);const{Current:n,createComponent:o}=this.taro;!n&&o?this.proxyTaro2(this.taro):n&&!o?this.proxyTaro3(this.taro,this.vue):he.consoleText("未获取到Taro实例或不支持的Taro版本，请检查!","error")},this.proxyTaro2=e=>{const t=this,i=e.createApp,s=e.createComponent;i&&(e.createApp=function(e){const s=i(e);return t.growingIO.dataStore.eventHooks.appOverriding(s),s}),s&&(e.createComponent=function(e,i){const n=s(e,i);return i?t.growingIO.dataStore.eventHooks.pageOverriding(["my","tt"].includes(t.growingIO.gioPlatform)?n:n.methods):t.growingIO.dataStore.eventHooks.componentOverriding(["my","tt"].includes(t.growingIO.gioPlatform)?n:n.methods),n})},this.proxyTaro3=(e,t)=>{const{eventHooks:i}=this.growingIO.dataStore;if(t){console.log("Vue version: ",t.version);const e=Number.parseInt(he.head(he.split(t.version,".")),10);i.nativeGrowing(),2===e?this.taro3Vue2Proxy(t):3===e?this.taro3Vue3Proxy(t):he.consoleText("不支持的Vue版本，请使用 Vue2 或 Vue3!","error")}else i.nativeGrowing(["App"]),this.taro3ReactProxy(e)},this.taro3ReactProxy=e=>{var t;const i=document.__proto__.__proto__,s=this,{eventHooks:n}=this.growingIO.dataStore,o=null===(t=null==e?void 0:e.hooks)||void 0===t?void 0:t.call;var r;o?s.defineProperty(e.hooks,"call",(function(...e){const t=Array.from(e);let i=o.apply(this,t);if("getLifecycle"===t[0]){const e=t[2];if(n.pageHandlers.includes(e)){let t=he.isArray(i)?i[0]:i;t=n.lifeFcEffects(e,he.isFunction(t)?t:()=>{},"Page"),i=he.isArray(i)?[t]:t}}return i})):($("Taro3实例获取失败，请检查初始化逻辑!","warn"),n.nativeGrowing(["Page"])),s.defineProperty(i,"addEventListener",(r=i.addEventListener,function(...e){const t=e[1],i=s.growingIO.dataStore.eventHooks.customFcEffects(t.name,t);return r.call(this,e[0],i,e[2])}))},this.taro3Vue2Proxy=e=>{const t=this;e.mixin({beforeMount:function(){const e=this.$options.methods;he.keys(e).forEach((e=>{t.defineProperty(this,e,t.proxyMethods(e,this[e]))}));const i=this._setupState;he.isEmpty(i)||he.keys(i).forEach((e=>{t.defineProperty(i,e,t.proxyMethods(e,i[e]))}))}})},this.taro3Vue3Proxy=e=>{const{eventHooks:t}=this.growingIO.dataStore,i=this;e.mixin({beforeMount:function(){var e;const s=e=>he.keys(e).forEach((e=>{i.defineProperty(this,e,i.proxyMethods(e,this[e]))})),n=this.$options.methods;n&&s(n);const o=null===(e=null==this?void 0:this._)||void 0===e?void 0:e.setupState;o&&s(o);const r=this._.emit;this._.emit=function(...e){return(()=>{t.customFcEffects(e[0],(()=>{})).apply(this,e)})(),r.apply(this,e)}},mounted(){var e,t;const s=null!==(t=null===(e=null==this?void 0:this._)||void 0===e?void 0:e.exposed)&&void 0!==t?t:{};if(i.exposedNames={},!he.isEmpty(s)){const e={};he.keys(s).forEach((t=>{he.isFunction(s[t])&&(i.exposedNames[s[t].name]=t,e[s[t].name]=s[t])})),i.traverseHook(this._.vnode.el)}}})},this.proxyMethods=(e,t)=>{const{eventHooks:i}=this.growingIO.dataStore;return he.isFunction(t)&&!i.pageHandlers.includes(e)?function(...s){return i.customFcEffects(e,t).apply(this,s)}:t},this.defineProperty=(e,t,i)=>{Object.defineProperty(e,t,{writable:!0,enumerable:!0,configurable:!0,value:i})},this.traverseHook=e=>{this.veiAutoEventHook(e),e.childNodes&&he.isArray(e.childNodes)&&e.childNodes.forEach((e=>{this.traverseHook(e)}))},this.veiAutoEventHook=e=>{const{eventHooks:t}=this.growingIO.dataStore;e._vei&&he.keys(e._vei).forEach((i=>{var s;if(t.actionEventTypes.includes(i)){const t=e._vei[i].value;this.defineProperty(e._vei[i],"value",this.proxyMethods(null!==(s=this.exposedNames[t.name])&&void 0!==s?s:t.name,t))}}))},this.saveFullPage=e=>{const t=e=>{e.forEach((e=>{var i;(null===(i=null==e?void 0:e.ctx)||void 0===i?void 0:i.route)?(this.growingIO.taro3VMs||(this.growingIO.taro3VMs={}),this.growingIO.taro3VMs[e.ctx.route]=e):he.isArray(e.childNodes)&&t(e.childNodes)}))};t(e.childNodes)},he=this.growingIO.utils,this.taro=null===(i=null===(t=this.growingIO)||void 0===t?void 0:t.vdsConfig)||void 0===i?void 0:i.taro,this.vue=null===(n=null===(s=this.growingIO)||void 0===s?void 0:s.vdsConfig)||void 0===n?void 0:n.taroVue,this.exposedNames={}}}};let ve,me,fe,Ie=[];var ye={name:"gioRemaxAdapter",method:class{constructor(e){var t,i;this.growingIO=e,this.main=()=>{var e,t;this.remax||(this.remax=null===(t=null===(e=this.growingIO)||void 0===e?void 0:e.vdsConfig)||void 0===t?void 0:t.remax);const{nativeGrowing:i}=this.growingIO.dataStore.eventHooks;i()},this.getTopView=e=>{var t;const i=null===(t=e.__data__||e.data)||void 0===t?void 0:t.root,s=ve.head(i.children);let n;return ve.isNumber(s)&&ve.has(i,"nodes")?n=i.nodes[ve.head(i.children)]:ve.isObject(s)&&(n=s),n},this.isPageTopView=(e,t)=>{var i,s,n,o,r;const a=this.getTopView(t),l=ve.isArray(null===(i=null==e?void 0:e.memoizedProps)||void 0===i?void 0:i.children)?ve.compact(null===(s=null==e?void 0:e.memoizedProps)||void 0===s?void 0:s.children):[];return(null==e?void 0:e.type)===(null==a?void 0:a.type)&&(null===(n=null==e?void 0:e.memoizedProps)||void 0===n?void 0:n.className)===(null===(o=null==a?void 0:a.props)||void 0===o?void 0:o.class)&&l.length===(null===(r=null==a?void 0:a.children)||void 0===r?void 0:r.length)},this.fiberNodeTraverse=(e,t)=>this.isPageTopView(e,t)?e:e.child?this.fiberNodeTraverse(e.child,t):null,this.findRealRoot=e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.wrapperRef)||void 0===t?void 0:t.current)||void 0===i?void 0:i._reactInternals)&&(e.__data__||e.data)?this.fiberNodeTraverse(e.wrapperRef.current._reactInternals,e):null},this.getHandlerName=e=>{const t=this.growingIO.remaxVMs[this.page];if(me=e,fe=Number(ve.split(me,"_")[2]),Ie=[],t){this.getDataNodePath(t.data);let e=t.fiberNode;const i=(t,i)=>{const[s,n]=ve.split(t,"-");return ve.isArray(i.children)?e=ve.compact(i.children)[Number(n)]:ve.isObject(i.children)&&(e=i.children),e},s=Ie.map((t=>i(t,e.props||e.memoizedProps)));if(s.length===Ie.length)return ve.last(s).props[ve.last(ve.split(me,"_"))].name}},this.getDataNodePath=({children:e,nodes:t})=>{let i=null;const s=e.find(((e,i)=>{const s=(ve.toString(e)===ve.toString(fe)||ve.toString(e.id)===ve.toString(fe))&&Object.values((t?t[e]:e).props).includes(me);return s&&Ie.unshift(`${t?e:e.id}-${i}`),s}));return s?i=ve.isNumber(s)&&t?t[s]:s:e.every(((e,s)=>!(t?t[e]:e).children||(i=this.getDataNodePath(t?t[e]:e),i&&Ie.unshift(`${t?e:e.id}-${s}`),!i))),i},ve=this.growingIO.utils,this.remax=null===(i=null===(t=this.growingIO)||void 0===t?void 0:t.vdsConfig)||void 0===i?void 0:i.remax,this.page="",this.growingIO.emitter.on("minipLifecycle",(({event:e,params:t})=>{var i;if("Page onShow"===e){if(!this.remax)return;const{page:e}=t,{dataStore:s,remaxVMs:n}=this.growingIO,{customFcEffects:o}=s.eventHooks;n||(this.growingIO.remaxVMs={}),e&&!this.growingIO.remaxVMs[e.route]&&(this.growingIO.remaxVMs[e.route]={}),this.page=e.route,e&&!(null===(i=this.growingIO.remaxVMs[e.route])||void 0===i?void 0:i.hooked)&&(ve.keys(e).filter((e=>e.indexOf("$$REMAX_METHOD")>-1)).forEach((t=>{e[t]=o(t,e[t])})),this.growingIO.remaxVMs[e.route]={hooked:!0,fiberNode:this.findRealRoot(e),data:this.getTopView(e)})}}))}}};function we(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))}let Oe;var Se={name:"gioImpressionTracking",method:class{constructor(e){this.growingIO=e,this.main=(e,t)=>{var i,s,n;const{vdsConfig:o,minipInstance:r,gioPlatform:a}=this.growingIO,{uniVue:l}=o,g=G(l);l&&2===g&&(e=e.$vm.$scope),this.impressionObserver&&this.impressionObserver.disconnect(),"my"===a?-1>K(my.SDKVersion,"2.7.0")||(this.impressionObserver=null===(i=r.minip)||void 0===i?void 0:i.createIntersectionObserver({[t]:!0,dataset:!0})):e.isComponent?this.impressionObserver=e.createIntersectionObserver({[t]:!0}):this.impressionObserver=null===(s=r.minip)||void 0===s?void 0:s.createIntersectionObserver(e,{[t]:!0}),null===(n=this.growingIO.minipInstance.minip)||void 0===n||n.createSelectorQuery().select(".growing_collect_imp").boundingClientRect((t=>{t&&this.creatObserver(e)})).exec()},this.creatObserver=e=>{var t;const{vdsConfig:{taro:i},gioPlatform:s}=this.growingIO,n=null===(t=this.impressionObserver)||void 0===t?void 0:t.relativeToViewport();null==n||n.observe(".growing_collect_imp",(t=>we(this,void 0,void 0,(function*(){if(!Oe.isEmpty(t)&&t.intersectionRatio>0){let n=t.dataset;i&&z(i)&&(n=this.getTaro3Dataset(e.route,t.id)),"ks"===s&&(yield this.getKsDataset(t).then((e=>n=e)));const o=this.getImpressionProperties(n),r=t.id;if(r){if("once"===n.gioImpType&&Oe.has(this.sentImps,r))return;this.sentImps[r]=o}o.eventId?this.buildImpEvent(o):Oe.consoleText("曝光事件格式不正确，事件名只能包含数字、字母和下划线，且不以数字开头!","warn")}}))))},this.getImpressionProperties=e=>{let t={eventId:void 0,properties:{}};if(!(null==e?void 0:e.gioImpTrack))return t;if(t.eventId=e.gioImpTrack,Oe.has(e,"gioImpAttrs"))t.properties=Oe.niceTry((()=>Oe.isObject(e.gioImpAttrs)?e.gioImpAttrs:JSON.parse(e.gioImpAttrs))),t.items=Oe.niceTry((()=>Oe.isObject(e.gioImpItems)?e.gioImpItems:JSON.parse(e.gioImpItems)));else{const i=/^gioTrack(.+)/;for(const s in e){let n;const o=s.match(i);o&&(n=Oe.lowerFirst(o[1]),"track"!==n&&(t.properties[n]=e[s]))}}return t.properties=Oe.limitObject(t.properties),t.items=Oe.limitObject(t.items),/^\w+$/.test(t.eventId)&&!Number.isInteger(Number.parseInt(Oe.head(t.eventId.split("")),10))||(t.eventId=null,t={}),t},this.getTaro3Dataset=(e,t)=>{var i;const s=null===(i=this.growingIO)||void 0===i?void 0:i.taro3VMs[e];if(!s)return!1;let n={};const o=e=>{e.some((e=>{var i;return e.uid===t&&(null===(i=e.props)||void 0===i?void 0:i.class.indexOf("growing_collect_imp"))>-1&&!Oe.isEmpty(e.dataset)?(n=e.dataset,!0):!!Array.isArray(e.childNodes)&&o(e.childNodes)}))};return o(s.childNodes),n},this.getKsDataset=e=>{const{minipInstance:t}=this.growingIO,i=t.minip.createSelectorQuery().selectAll(".growing_collect_imp"),{width:s,height:n}=e.boundingClientRect;return new Promise((e=>{i.boundingClientRect((t=>{const i=t.find((e=>Oe.fixed(s)===Oe.fixed(e.width)&&Oe.fixed(n)===Oe.fixed(e.height)));e((null==i?void 0:i.dataset)||{})})).exec()}))},this.buildImpEvent=e=>{const{eventId:t,properties:i,items:s}=e,{dataStore:{eventContextBuilder:n,eventInterceptor:o,eventHooks:r}}=this.growingIO;o(Object.assign({eventType:"CUSTOM",pageShowTimestamp:r.currentPage.time,eventName:t,attributes:i,resourceItem:s},n()))},Oe=this.growingIO.utils,this.growingIO.updateImpression=()=>{this.main(this.growingIO.minipInstance.getCurrentPage(),"observeAll")},this.sentImps={}}}};let be;var Te={name:"gioEventAutoTracking",method:class{constructor(e){this.growingIO=e,this.main=(e,t)=>{var i,s;const{vdsConfig:n,platformConfig:o,plugins:r,emitter:a}=this.growingIO;if(!n.autotrack||!t||be.get(e,"currentTarget.dataset.growingIgnore")||be.get(e,"target.dataset.growingIgnore")||!be.get(e,"target.dataset.growingTrack")&&"autoplay"===be.get(e,"detail.source")||e.type===(null===(i=this.prevEvent)||void 0===i?void 0:i.type)&&10>Math.abs(Number(e.timeStamp)-Number(null===(s=this.prevEvent)||void 0===s?void 0:s.timeStamp)))return;if(this.prevEvent=e,n.uniVue&&(t=null==r?void 0:r.gioUniAppAdapter.getHandlerName(t,e)),n.taro&&["eh"].includes(t))return;if(n.cml&&["_cmlEventProxy","onclick","blurEvent","handleDetail"].includes(t))return;n.remax&&t.indexOf("$$REMAX_METHOD")>-1&&(t=null==r?void 0:r.gioRemaxAdapter.getHandlerName(t)),n.debug&&console.log("Action：",e.type,Date.now()),a.emit("onComposeBefore",{event:t,params:null!=e?e:{}});const l=o.listeners.actions;l.click.includes(e.type)?this.buildClickEvent(e,t):l.change.includes(e.type)?this.buildChangeEvent(e,t):l.submit.includes(e.type)&&this.buildSubmitEvent(e,t)},this.getNodeXpath=(e,t)=>{const{gioPlatform:i,vdsConfig:s}=this.growingIO;let n=(e.currentTarget||e.target).id;if((!n||"swan"===i&&/^_[0-9a-f]+/.test(n)||z(s.taro)&&/^_n_[0-9]+$/.test(n))&&(n=""),!s.octopus||(t=e.handler,/^bound .*/.test(t)&&(t=t.replace("bound ","")),/^t[0-9]+$/.test(n)&&(n=""),n&&!t&&(t="anonymousFunc"),n||t))return`${n}#${t}`},this.buildClickEvent=(e,t)=>{var i,s,n;const o=this.getNodeXpath(e,t);if(o){const{dataStore:{eventContextBuilder:t,eventInterceptor:r,eventHooks:a},gioEnvironment:l}=this.growingIO,g=e.currentTarget||e.target;let u;be.has(null==g?void 0:g.dataset,"index")&&""!==(null===(i=null==g?void 0:g.dataset)||void 0===i?void 0:i.index)&&(u=Number.parseInt(g.dataset.index,10),Number.isNaN(u)&&(u=-1)),r(Object.assign({eventType:"saas"===l&&e.type.includes("long")?"lngprss":"VIEW_CLICK",pageShowTimestamp:a.currentPage.time,element:[{xpath:o,index:u,textValue:null===(s=null==g?void 0:g.dataset)||void 0===s?void 0:s.title,hyperlink:null===(n=null==g?void 0:g.dataset)||void 0===n?void 0:n.src}]},t()))}},this.buildTabClickEvent=e=>{const{dataStore:{eventContextBuilder:t,eventInterceptor:i,eventHooks:s}}=this.growingIO;i(Object.assign({eventType:"VIEW_CLICK",pageShowTimestamp:s.currentPage.time,element:[{xpath:"#onTabItemTap",textValue:e.text,index:e.index,hyperlink:be.toString(e.pagePath)}]},t()))},this.buildChangeEvent=(e,t)=>{var i,s;const n=this.getNodeXpath(e,t);if(n){const{dataStore:{eventContextBuilder:t,eventInterceptor:o,eventHooks:r}}=this.growingIO,a=e.currentTarget||e.target,l=Object.assign({eventType:"VIEW_CHANGE",pageShowTimestamp:r.currentPage.time,element:{xpath:n}},t()),g=be.get(e,"detail.value")||be.get(e,"target.attr.value");((null===(i=null==a?void 0:a.dataset)||void 0===i?void 0:i.growingTrack)||(null===(s=null==a?void 0:a.dataset)||void 0===s?void 0:s.growingtrack))&&(be.isNil(g)||(l.element.textValue=be.toString(g))),l.element=[l.element],o(l)}},this.buildSubmitEvent=(e,t)=>{const i=this.getNodeXpath(e,t);if(i){const{dataStore:{eventContextBuilder:e,eventInterceptor:t,eventHooks:s}}=this.growingIO;t(Object.assign({eventType:"FORM_SUBMIT",pageShowTimestamp:s.currentPage.time,element:[{xpath:i}]},e()))}},be=this.growingIO.utils,this.prevEvent={}}}};let _e;var Pe={name:"gioCustomTracking",method:class{constructor(e){this.growingIO=e,this.getValidResourceItem=e=>{if(e&&_e.isObject(e)&&e.id&&e.key){const t={id:_e.isString(e.id)?e.id:_e.toString(e.id),key:_e.isString(e.key)?e.key:_e.toString(e.key)};return e.attributes&&(t.attributes=e.attributes),t}},this.getDynamicAttributes=e=>(_e.isNil(e)||_e.keys(e).forEach((t=>{_e.isFunction(e[t])?e[t]=e[t]():_e.isArray(e[t])||(e[t]=_e.toString(e[t]))})),e),this.buildCustomEvent=(e,t,i)=>{_e.eventNameValidate(e,(()=>{var s;const{dataStore:{eventContextBuilder:n,eventInterceptor:o,eventHooks:r}}=this.growingIO;o(Object.assign({eventType:"CUSTOM",eventName:e,pageShowTimestamp:null===(s=null==r?void 0:r.currentPage)||void 0===s?void 0:s.time,attributes:_e.limitObject(this.getDynamicAttributes(_e.isObject(t)&&!_e.isEmpty(t)?t:void 0)),resourceItem:_e.limitObject(this.getValidResourceItem(i))},n()))}))},this.buildUserAttributesEvent=e=>{const{dataStore:{eventContextBuilder:t,eventInterceptor:i,lastVisitEvent:s}}=this.growingIO,n=Object.assign({eventType:"LOGIN_USER_ATTRIBUTES",attributes:_e.limitObject(e)},t());n.path||(n.path=s.path,n.query=s.query,n.title=s.title),i(n)},_e=this.growingIO.utils}}},ke={name:"gioCompress",method:class{constructor(e){this.growingIO=e,this.compressToUTF16=e=>{const t=this;return null===e?"":this._compress(e,15,(function(e){return t.f(e+32)}))+" "},this.f=String.fromCharCode,this._compress=function(e,t,i){if(null===e)return"";let s,n,o,r={},a={},l="",g="",u="",d=2,c=3,h=2,p=[],v=0,m=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),{}.hasOwnProperty.call(r,l)||(r[l]=c++,a[l]=!0),g=u+l,{}.hasOwnProperty.call(r,g))u=g;else{if({}.hasOwnProperty.call(a,u)){if(256>u.charCodeAt(0)){for(s=0;h>s;s++)v<<=1,m===t-1?(m=0,p.push(i(v)),v=0):m++;for(n=u.charCodeAt(0),s=0;8>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1}else{for(n=1,s=0;h>s;s++)v=v<<1|n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n=0;for(n=u.charCodeAt(0),s=0;16>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1}d--,0===d&&(d=Math.pow(2,h),h++),delete a[u]}else for(n=r[u],s=0;h>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1;d--,0===d&&(d=Math.pow(2,h),h++),r[g]=c++,u=l+""}if(""!==u){if({}.hasOwnProperty.call(a,u)){if(256>u.charCodeAt(0)){for(s=0;h>s;s++)v<<=1,m===t-1?(m=0,p.push(i(v)),v=0):m++;for(n=u.charCodeAt(0),s=0;8>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1}else{for(n=1,s=0;h>s;s++)v=v<<1|n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n=0;for(n=u.charCodeAt(0),s=0;16>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1}d--,0===d&&(d=Math.pow(2,h),h++),delete a[u]}else for(n=r[u],s=0;h>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1;d--,0===d&&(d=Math.pow(2,h),h++)}for(n=2,s=0;h>s;s++)v=v<<1|1&n,m===t-1?(m=0,p.push(i(v)),v=0):m++,n>>=1;for(;;){if(v<<=1,m===t-1){p.push(i(v));break}m++}return p.join("")}}}};const Ce={};function Ee(e,t,i){var s=e;t.map((function(e,n){s[e]=n==t.length-1?i:s[e]||{},s=s[e]}))}Ee(Ce,["plugins","gioChameleonAdapter"],{name:"gioChameleonAdapter",method:class{constructor(e){var t,i;this.growingIO=e,this.main=()=>{const{vdsConfig:e,dataStore:{eventHooks:t}}=this.growingIO;this.cml||(this.cml=null==e?void 0:e.cml);const i=this.cml.createApp,s=this.cml.createPage,n=this.cml.createComponent;this.cml.createApp=function(e){return i(t.appOverriding(e))},this.cml.createPage=function(e){return s(t.pageOverriding(e))},this.cml.createComponent=function(e){return n(t.componentOverriding(e))}},this.cml=null===(i=null===(t=this.growingIO)||void 0===t?void 0:t.vdsConfig)||void 0===i?void 0:i.cml}}}),Ee(Ce,["plugins","gioCompress"],ke),Ee(Ce,["plugins","gioCustomTracking"],Pe),Ee(Ce,["plugins","gioEventAutoTracking"],Te),Ee(Ce,["plugins","gioImpressionTracking"],Se),Ee(Ce,["plugins","gioRemaxAdapter"],ye),Ee(Ce,["plugins","gioTaroAdapter"],pe),Ee(Ce,["plugins","gioUniAppAdapter"],ce),Ee(Ce,["plugins","gioWepyAdapter"],{name:"gioWepyAdapter",method:class{constructor(e){var t,i;this.growingIO=e,this.main=()=>{var e,t;this.wepy||(this.wepy=null===(t=null===(e=this.growingIO)||void 0===e?void 0:e.vdsConfig)||void 0===t?void 0:t.wepy),this.proxyWepy(this.wepy)},this.proxyWepy=e=>{const{appOverriding:t,pageOverriding:i,componentOverriding:s}=this.growingIO.dataStore.eventHooks,n=e.app,o=e.page,r=e.component;e.app=function(e,i){return n(t(e),i)},e.page=function(e,t){return o(i(e),t)},e.component=function(e,t){return r(s(e),t)}},this.wepy=null===(i=null===(t=this.growingIO)||void 0===t?void 0:t.vdsConfig)||void 0===i?void 0:i.wepy}}});class xe{constructor(e){this.growingIO=e,this.innerPluginInit=()=>{C(Ce.plugins).forEach((e=>{const{name:t,method:i}=Ce.plugins[e];this.pluginItems.find((e=>e.name===t))||this.pluginItems.push({name:b(t||e),method:i||(e=>{})})})),q(this.pluginItems)||this.installAll()},this.install=(e,t,i)=>{var s;const n=t||this.pluginItems.find((t=>t.name===e));if(null===(s=this.growingIO)||void 0===s?void 0:s.plugins[e])return $(`重复加载插件 ${e} 或插件重名，已跳过加载!`,"warn"),!1;if(!n)return $(`插件加载失败!不存在名为 ${e} 的插件!`,"error"),!1;try{return this.growingIO.plugins[e]=new n.method(this.growingIO,i),"cdp"===this.growingIO.gioEnvironment&&t&&$("加载插件："+e,"info"),!0}catch(e){return $("插件加载异常："+e,"error"),!1}},this.installAll=e=>{(e||this.pluginItems).forEach((t=>this.install(t.name,e?t:void 0,t.options)))},this.uninstall=e=>{var t;N(this.pluginItems,e);const i=N(null===(t=this.growingIO)||void 0===t?void 0:t.plugins,e);return i||$(`卸载插件 ${e} 失败!`,"error"),i},this.uninstallAll=()=>{this.pluginItems.forEach((e=>this.uninstall(e.name)))},this.lifeError=(e,t)=>$(`插件执行错误 ${e.name} ${t}`,"error"),this.onComposeBefore=e=>{this.pluginItems.forEach((t=>{var i;const s=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onComposeBefore;if(s&&p(s))try{s(e)}catch(e){this.lifeError(t,e)}}))},this.onComposeAfter=e=>{this.pluginItems.forEach((t=>{var i;const s=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onComposeAfter;if(s&&p(s))try{s(e)}catch(e){this.lifeError(t,e)}}))},this.onSendBefore=e=>{this.pluginItems.forEach((t=>{var i;const s=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onSendBefore;if(s&&p(s))try{s(e)}catch(e){this.lifeError(t,e)}}))},this.onSendAfter=e=>{this.pluginItems.forEach((t=>{var i;const s=null===(i=this.growingIO.plugins[t.name])||void 0===i?void 0:i.onSendAfter;if(s&&p(s))try{s(e)}catch(e){this.lifeError(t,e)}}))},this.pluginItems=[],this.growingIO.emitter.on("onComposeBefore",this.onComposeBefore),this.growingIO.emitter.on("onComposeAfter",this.onComposeAfter),this.growingIO.emitter.on("onSendBefore",this.onSendBefore),this.growingIO.emitter.on("onSendAfter",this.onSendAfter)}}class Ae{constructor(e){var t;this.growingIO=e,this.initUserInfo=()=>{var e;const{minipInstance:t}=this.growingIO,i=[this.uidStorageName,this.userIdStorageName,this.userKeyStorageName,this.gioIdStorageName],s=null!==(e=se(t,i))&&void 0!==e?e:[];["_uid","_userId","_userKey","_gioId"].forEach(((e,t)=>{this[e]=s[t],"_uid"!==e||this[e]||(this.uid=R())}))},this.saveUserInfo=()=>{const{minipInstance:e}=this.growingIO;ne(e,[{key:this.uidStorageName,value:this.uid},{key:this.userIdStorageName,value:this.userId},{key:this.userKeyStorageName,value:this.userKey},{key:this.gioIdStorageName,value:this.gioId}])};const{inPlugin:i}=this.growingIO;this.uidStorageName=i?"_growing_plugin_uid_":"_growing_uid_",this.userIdStorageName=i?"_growing_plugin_userId_":"_growing_userId_",this.userKeyStorageName=i?"_growing_plugin_userKey_":"_growing_userKey_",this.gioIdStorageName=i?"_growing_plugin_gioId_":"_growing_gioId_",this._sessionId=R(),this._uid=void 0,this._userId=void 0,this._userKey=void 0,this._gioId=void 0,"quickapp"!==(null===(t=this.growingIO)||void 0===t?void 0:t.gioPlatform)&&this.initUserInfo()}get sessionId(){return this._sessionId||(this._sessionId=R()),this._sessionId}set sessionId(e){const t=this._sessionId;this._sessionId=e||R(),t!==this._sessionId&&this.growingIO.emitter.emit("SESSIONID_UPDATE",{newSessionId:this._sessionId,oldSessionId:t})}get uid(){return this._uid}set uid(e){const t=this._uid;this._uid=e,t!==this._uid&&(this.growingIO.minipInstance.setStorage(this.uidStorageName,this._uid),this.growingIO.emitter.emit("UID_UPDATE",{newUId:e,oldUId:t}))}get userId(){return this._userId}set userId(e){const t=this._userId;this._userId=e,t!==this._userId&&(this.growingIO.minipInstance.setStorage(this.userIdStorageName,this._userId),this.growingIO.emitter.emit("USERID_UPDATE",{newUserId:e,oldUserId:t})),e&&(this.gioId=e)}get userKey(){return this._userKey}set userKey(e){const t=this._userKey;this._userKey=e,t!==this._userKey&&(this.growingIO.minipInstance.setStorage(this.userKeyStorageName,this._userKey),this.growingIO.emitter.emit("USERKEY_UPDATE",{newUserKey:e,oldUserKey:t}))}get gioId(){return this._gioId}set gioId(e){const t=this._gioId;this._gioId=e,t!==this._gioId&&(this.growingIO.minipInstance.setStorage(this.gioIdStorageName,this._gioId),this.growingIO.emitter.emit("GIOID_UPDATE",{newGioId:e,oldGioId:t}))}}const Ne={scnPrefix:"",appHandlers:["onLaunch","onShow","onHide","onError","onPageNotFound"],pageHandlers:["onLoad","onShow","onReady","onHide","onUnload","onShareAppMessage","onTabItemTap"],actionEventTypes:["onclick","tap","onTap","longpress","longTap","blur","change","onChange","submit","confirm","getuserinfo","getphonenumber","contact"],originalApp:F((()=>App)),originalPage:F((()=>Page)),originalComponent:F((()=>Component)),originalBehavior:F((()=>Behavior)),canHook:!0,hooks:{App:!0,Page:!0,Component:!0,Behavior:!0},listeners:{app:{appLaunch:"onLaunch",appShow:"onShow",appClose:"onHide"},page:{pageLoad:"onLoad",pageShow:"onShow",pageReady:"onReady",pageHide:"onHide",pageUnload:"onUnload",tabTap:"onTabItemTap",shareApp:"onShareAppMessage"},actions:{click:["onclick","tap","longpress","longTap","getuserinfo","getphonenumber","contact"],change:["blur","change","confirm"],submit:["submit"]}}},je=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"JingDong",platform:"jdp",scnPrefix:"jd_"}),qe=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"KuaiShou",platform:"kuaishoup",scnPrefix:"ks_"}),He=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"Alipay",platform:"alip",scnPrefix:"alip_",hooks:Object.assign(Object.assign({},null==Ne?void 0:Ne.hooks),{Behavior:!1})}),Ve=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"QQ",platform:"qq",scnPrefix:"qq_"});Ve.pageHandlers=[...Ne.pageHandlers,"onAddToFavorites"],Ve.listeners.page.addFavorites="onAddToFavorites";const $e=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"Baidu",platform:"baidup",scnPrefix:"baidup_"}),Fe=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"Bytedance",platform:"bytedance",scnPrefix:"bytedance_"}),De=Object.assign(Object.assign({},Ne),{listeners:Object.assign({},Ne.listeners),name:"Weixin",platform:"MinP"});De.pageHandlers=[...Ne.pageHandlers,"onShareTimeline","onAddToFavorites"],De.listeners.page=Object.assign(Object.assign({},Ne.listeners.page),{shareTime:"onShareTimeline",addFavorites:"onAddToFavorites"});const Le=Z(),Re=F((()=>{const e={jd:je,ks:qe,my:He,qq:Ve,swan:$e,tt:Fe,wx:De}[Le];return e.canHook=!1,e}));class Me{constructor(e){this.growingIO=e,this.minip=X("framework"),this.hookSetTitle=()=>{var e;const t=null===(e=this.minip)||void 0===e?void 0:e.setNavigationBarTitle,i=this;t&&Object.defineProperty(this.minip,"setNavigationBarTitle",{writable:!0,enumerable:!0,configurable:!0,value:function(){if(i.growingIO.gioSDKInitialized){const e=i.getCurrentPath(),{title:t}=arguments[0]||{};i.growingIO.dataStore.eventHooks.currentPage.settedTitle[e]=t}return t.apply(this,arguments)}})},this.navigateTo=e=>{var t;return null===(t=this.minip)||void 0===t?void 0:t.navigateTo(e)},this.switchTab=e=>{var t;null===(t=this.minip)||void 0===t||t.switchTab(e)},this.navigateToMiniProgram=e=>{var t;return null===(t=this.minip)||void 0===t?void 0:t.navigateToMiniProgram(e)},this.getImageInfo=({src:e,success:t,fail:i,complete:s})=>{var n;return null===(n=this.minip)||void 0===n?void 0:n.getImageInfo({src:e,success:t,fail:i,complete:s})},this.initImpression=e=>{var t,i;null===(i=null===(t=this.growingIO.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===i||i.main(e,"observeAll")},this.getCurrentPage=()=>F((()=>f(getCurrentPages())))||{},this.getCurrentPath=()=>{const e=this.getCurrentPage();return(null==e?void 0:e.route)||(null==e?void 0:e.uri)||(null==e?void 0:e.__route__)||""},this.getPageTitle=e=>{var t,i;let s="";const n=J(Z());try{const o=(null==e?void 0:e.data)||e.$data||{};if(s=u(null==o?void 0:o.gioPageTitle)?null==o?void 0:o.gioPageTitle:"",0===s.length){const t=n.page[e.route]||n.page[e.route+".html"];s=t?t.window.navigationBarTitleText:n.global.window.navigationBarTitleText}if(0===s.length){const o=null===(i=null===(t=null==n?void 0:n.tabBar)||void 0===t?void 0:t.list)||void 0===i?void 0:i.find((t=>t.pagePath===e.route||t.pagePath===e.route+".html"));s=(null==o?void 0:o.text)||""}}catch(e){return""}return D(s)},this.getStorageSync=e=>{var t;return null===(t=this.minip)||void 0===t?void 0:t.getStorageSync(e)},this.getStorage=e=>new Promise((t=>{var i;null===(i=this.minip)||void 0===i||i.getStorage({key:e,success:({data:e})=>t(e),fail:()=>t("")})})),this.setStorageSync=(e,t)=>{var i;null===(i=this.minip)||void 0===i||i.setStorageSync(e,t)},this.setStorage=(e,t)=>{var i;null===(i=this.minip)||void 0===i||i.setStorage({key:e,data:t})},this.removeStorageSync=e=>{var t;null===(t=this.minip)||void 0===t||t.removeStorageSync(e)},this.removeStorage=e=>{var t;null===(t=this.minip)||void 0===t||t.removeStorage(e)},this.getNetworkType=()=>we(this,void 0,void 0,(function*(){const e=this;return yield new Promise((t=>{var i;null===(i=this.minip)||void 0===i||i.getNetworkType({success:i=>{e.network=i,t(i)},fail:()=>t(null)})}))})),this.request=({url:e,data:t,header:i,timeout:s,method:n,success:o,fail:r,complete:a})=>{var l;const g=null===(l=this.minip)||void 0===l?void 0:l.request({url:e,data:t,header:i,headers:i,timeout:s,method:n,success:o,fail:r,complete:a});let u=setTimeout((()=>{null==g||g.abort(),clearTimeout(u),u=null}),(s||1e4)+10);return g},this.getSystemInfo=()=>we(this,void 0,void 0,(function*(){const e=this;return yield new Promise((t=>{var i;null===(i=this.minip)||void 0===i||i.getSystemInfo({success:i=>{e.systemInfo=i,t(i)},fail:()=>t(null)})}))})),this.getSetting=()=>new Promise((e=>{var t;null===(t=this.minip)||void 0===t||t.getSetting({success:e,fail:e})}));const{platformConfig:{platform:t,scnPrefix:i}}=this.growingIO;this.platform=t,this.scnPrefix=i,this.getNetworkType().then((()=>{var e;return null===(e=this.growingIO.dataStore)||void 0===e?void 0:e.eventReleaseInspector()})),this.getSystemInfo().then((()=>{var e;return null===(e=this.growingIO.dataStore)||void 0===e?void 0:e.eventReleaseInspector()}))}}const Be=Z();var Ue={wx:class extends Me{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},swan:class extends Me{constructor(e){super(e),this.growingIO=e,this.initImpression=e=>{var t,i;null===(i=null===(t=this.growingIO.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===i||i.main(e,"selectAll")},this.hookSetTitle()}},my:class extends Me{constructor(e){super(e),this.growingIO=e,this.hookSetTitle=()=>{var e;const t=null===(e=this.minip)||void 0===e?void 0:e.setNavigationBar,i=this;t&&Object.defineProperty(this.minip,"setNavigationBar",{writable:!0,enumerable:!0,configurable:!0,value:function(){if(i.growingIO.gioSDKInitialized){const e=i.getCurrentPath(),{title:t}=arguments[0]||{};i.growingIO.dataStore.eventHooks.currentPage.settedTitle[e]=t}return t.apply(this,arguments)}})},this.initImpression=e=>{var t,i;null===(i=null===(t=this.growingIO.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===i||i.main(e,"selectAll")},this.getStorageSync=e=>{const{data:t}=my.getStorageSync({key:e});return t},this.setStorageSync=(e,t)=>{var i;null===(i=this.minip)||void 0===i||i.setStorageSync({key:e,data:t})},this.hookSetTitle()}},qq:class extends Me{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},tt:class extends Me{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},ks:class extends Me{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}},jd:class extends Me{constructor(e){super(e),this.growingIO=e,this.hookSetTitle()}}}[Be],Ke={},Ge={}.hasOwnProperty;function Qe(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function We(e){try{return encodeURIComponent(e)}catch(e){return null}}Ke.stringify=function(e,t){t=t||"";var i,s,n=[];for(s in"string"!=typeof t&&(t="?"),e)if(Ge.call(e,s)){if((i=e[s])||null!=i&&!isNaN(i)||(i=""),s=We(s),i=We(i),null===s||null===i)continue;n.push(s+"="+i)}return n.length?t+n.join("&"):""},Ke.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,s={};t=i.exec(e);){var n=Qe(t[1]),o=Qe(t[2]);null===n||null===o||n in s||(s[n]=o)}return s};class ze{constructor(){var e;this.init=e=>($("Gio小程序SDK 初始化中...","info"),this.dataStore.initOptions(e),this.gioSDKInitialized=!0,this.vdsConfig.subpackage||(ee().__gio__=()=>this),null==this||this.initCallback(),this.emitter.emit("SDK_INITIALIZED",this),$("Gio小程序SDK 初始化完成！","success"),this.vdsConfig.forceLogin&&$("forceLogin已开启，请调用 identify 方法设置 openId 以继续上报!","info"),this.inPlugin&&this.dataStore.sendVisit(),!0),this.setDataCollect=e=>{this.setOption("dataCollect",!!e),this.notRecommended()},this.setAutotrack=e=>{this.setOption("autotrack",!!e),this.notRecommended()},this.enableDebug=e=>{this.setOption("debug",!!e),this.notRecommended()},this.setOption=(e,t)=>{if(n.includes(e)){const i=this.dataStore.setOption(e,t);return i&&o[e]&&$(`已${t?"开启":"关闭"}${o[e]}`,"info"),i}return $(`不存在可修改的配置项：${e}，请检查后重试!`,"warn"),!1},this.getDeviceId=()=>this.userStore.uid,this.getOption=e=>this.dataStore.getOption(e),this.getGioInfo=()=>{const{uid:e,userId:t,userKey:i,sessionId:s,gioId:n}=this.userStore,{projectId:o,appId:r,dataSourceId:a,dataCollect:l,enableIdMapping:g,extraParams:u,ignoreFields:d}=this.vdsConfig,c={gioappid:r,giocs1:t||"",gioplatform:this.platformConfig.platform,gioprojectid:o,gios:s,giou:e};return"cdp"===this.gioEnvironment&&(c.giodatacollect=l,c.giodatasourceid=a,c.gioid=n||"",g&&(c.giouserkey=i),q(u)||u.forEach((e=>{d.includes(e)||(c["gio"+e]=this.dataStore.lastVisitEvent[e])}))),Ke.stringify(c)},this.setLocation=(e,t)=>{const i={latitude:e,longitude:t},s=this.dataStore.locationData,n=e=>e>=-180&&180>=e;n(e)&&n(t)&&(s.latitude!==e||s.longitude!==t)&&(this.dataStore.locationData=i,this.dataStore.sendVisit())},this.setGeneralProps=e=>{h(e)&&!q(e)?(this.dataStore.generalProps=Object.assign(Object.assign({},this.dataStore.generalProps),e),C(this.dataStore.generalProps).forEach((e=>{[void 0,null].includes(this.dataStore.generalProps[e])&&(this.dataStore.generalProps[e]="")}))):this.callError("setGeneralProps")},this.clearGeneralProps=e=>{v(e)&&!q(e)?e.forEach((e=>{N(this.dataStore.generalProps,e)})):this.dataStore.generalProps={}},this.setPageAttributes=e=>{const{currentPage:t}=this.dataStore.eventHooks,i=this.minipInstance.getCurrentPath();["onLoad","attached"].includes(t.currentLifecycle)&&(t.pageProps[i]=ie(e))},this.updateImpression=()=>{$("当前未集成半自动浏览插件，请集成插件后再调用 updateImpression!","warn")},this.notRecommended=()=>$("不推荐的方法使用，建议使用 gio('setOption', [optionName], [value])!","info"),this.callError=(e,t=!0,i="参数不合法")=>$(`${t?"调用":"设置"} ${e} 失败，${i}!`,"warn"),this.utils=Object.assign(Object.assign(Object.assign({},V),ae),{qs:Ke}),this.emitter={all:e=e||new Map,on:function(t,i){var s=e.get(t);s?s.push(i):e.set(t,[i])},off:function(t,i){var s=e.get(t);s&&(i?s.splice(s.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var s=e.get(t);s&&s.slice().map((function(e){e(i)})),(s=e.get("*"))&&s.slice().map((function(e){e(t,i)}))}},this.gioPlatform=Z(),this.gioFramework="full",this.gioEnvironment="cdp",this.sdkVersion="3.8.16";try{"quickapp"===this.gioPlatform||p(getApp)&&p(App)?this.inPlugin=!1:this.inPlugin=!0}catch(e){this.inPlugin=!0}this.inPlugin&&$("未检测到小程序实例，自动切换为插件模式!","info"),this.platformConfig=Re,this.minipInstance=new Ue(this),this.userStore=new Ae(this),this.plugins=new xe(this),this.plugins.innerPluginInit()}}class Xe{constructor(e){this.growingIO=e,this.main=e=>{var t,i,s,n,o;const{sdkVersion:r,vdsConfig:a,platformConfig:l,minipInstance:g,userStore:u,dataStore:{scene:d,eventHooks:c,locationData:h,lastVisitEvent:p}}=this.growingIO,{systemInfo:v={},network:m={}}=g,{brand:f,model:I,platform:y,language:w,version:O}=v,S={appChannel:"scn:"+(d||"NA"),appVersion:a.version,dataSourceId:a.dataSourceId,deviceBrand:f,deviceId:u.uid,deviceModel:I,deviceType:U(y,l.name),domain:a.appId,gioId:u.gioId,language:w,latitude:null==h?void 0:h.latitude,longitude:null==h?void 0:h.longitude,networkState:(null==m?void 0:m.networkType)||(null==m?void 0:m.type)||(null==m?void 0:m.subtype),operatingSystem:U(y,l.name),path:(null===(t=c.currentPage)||void 0===t?void 0:t.path)?null===(i=c.currentPage)||void 0===i?void 0:i.path:p.path,platform:l.platform,platformVersion:l.name+(O?" "+O:""),query:(null===(s=c.currentPage)||void 0===s?void 0:s.path)?null===(n=c.currentPage)||void 0===n?void 0:n.query:p.query,screenHeight:M(v),screenWidth:B(v),sdkVersion:r,sessionId:u.sessionId,title:(null===(o=c.currentPage)||void 0===o?void 0:o.title)||g.getPageTitle(g.getCurrentPage()),timestamp:Date.now(),userId:u.userId};return a.enableIdMapping&&(S.userKey=u.userKey),q(a.ignoreFields)||a.ignoreFields.forEach((e=>{N(S,e)})),q(e)?S:Object.assign(Object.assign({},S),e)}}}class Je{constructor(e){this.growingIO=e,this.main=(e,t)=>{var i,s;const n=Date.now(),{emitter:o,userStore:r,vdsConfig:a,platformConfig:l,uploader:g,dataStore:u,dataStore:{keepAlive:d,lastCloseTime:c,eventHooks:h,saveStorageInfo:p}}=this.growingIO;o.emit("minipLifecycle",{event:"App "+e,timestamp:n,params:null!==(i=t[0])&&void 0!==i?i:{}}),a.debug&&console.log("App:",e,n);const v=l.listeners.app;switch(o.emit("onComposeBefore",{event:"App "+e,params:null!==(s=t[0])&&void 0!==s?s:{}}),e){case v.appCreate:case v.appShow:{const{path:e,query:i}=this.enterParamsParse(t[0]);c?(Date.now()-c>d||u.lastScene&&u.scene!==u.lastScene)&&(r.sessionId="",h.currentPage.time=void 0,this.buildVisitEvent({path:e,query:i})):(this.growingIO.dataStore.lastVisitEvent={path:e,query:i},this.buildVisitEvent({path:e,query:i}));break}case v.appClose:u.lastScene=u.scene,u.lastCloseTime=Date.now(),p(),r.saveUserInfo(),this.buildCloseEvent(),a.forceLogin||g.initiateRequest(!0)}},this.enterParamsParse=e=>{const{gioPlatform:t,minipInstance:i,dataStore:s}=this.growingIO;let n="",o="";const r=(e,t={})=>{n=e,o=C(t).map((e=>`${e}=${t[e]}`)).join("&")};if("quickapp"!==t&&i.minip.canIUse("getEnterOptionsSync")){const{path:t,query:n,scene:a,referrerInfo:l}=i.minip.getEnterOptionsSync()||{},g=e.query||n;if(r(e.path||t,g),s.scene=e.scene||a,!q(l)&&h(null==l?void 0:l.extraData)){let e=[];E(l.extraData,((t,i)=>{!k(g,i)&&["string","number","boolean"].includes(H(t))&&e.push(`${i}=${t}`)}));const t=e.join("&");o=o&&t?`${o}&${t}`:o||t}}else{const{path:t,query:i}=e;r(t,i),this.parseScene(e)}return{path:n,query:o}},this.parseScene=e=>{var t;const{minipInstance:i,gioPlatform:s,dataStore:n}=this.growingIO;let o;if("quickapp"===s){const{extra:e,type:t}=i.getAppSource();o=(null==e?void 0:e.scene)||t}else e.length>0&&((null===(t=null==e?void 0:e.query)||void 0===t?void 0:t.wxShoppingListScene)?o=e.query.wxShoppingListScene:(null==e?void 0:e.scene)?o=e.scene:n.scene="NA");n.scene=o},this.buildVisitEvent=e=>{const{dataStore:t}=this.growingIO,{eventContextBuilder:i,eventInterceptor:s}=t,n=(null==e?void 0:e.query)||(null==e?void 0:e.q)||"";s(Object.assign({eventType:"VISIT"},i({path:(null==e?void 0:e.path)||(null==e?void 0:e.p)||"",query:"string"===H(n)?n:oe(n)})))},this.buildCloseEvent=()=>{const{dataStore:{eventContextBuilder:e,eventInterceptor:t}}=this.growingIO;t(Object.assign({eventType:"APP_CLOSED"},e()))}}}class Ze{constructor(e){this.growingIO=e,this.parsePage=(e,t)=>{var i;const s=e.route||e.uri||e.__route__||(null===(i=null==e?void 0:e.$page)||void 0===i?void 0:i.fullPath)||"";q(t)?this.query=void 0:this.query=this.getQuery(t),this.path!==s&&(this.time=Date.now()),this.path=s,this.title=this.settedTitle[this.path]||this.growingIO.minipInstance.getPageTitle(e||this.growingIO.minipInstance.getCurrentPage())},this.getQuery=e=>{const t=Object.assign({},e);return N(t,"wxShoppingListScene"),oe(t)},this.saveShareId=e=>{(null==e?void 0:e.gioShareId)&&(this.queryShareId=e.gioShareId)},this.updateShareResult=(e,t)=>{const[i,s,n]=this.buildShareQuery(e,t);return t.path=W(i+(s?"?"+s:"")),t.attributes=n,t.query=s,t},this.updateAppMessageResult=this.updateShareResult,this.updateTimelineResult=this.updateShareResult,this.updateAddFavoritesResult=(e,t)=>{const[i,s]=this.buildShareQuery(e,t,!1);return t.path=W(i+(s?"?"+s:"")),t.query=s,t},this.query=void 0,this.settedTitle={},this.pageProps={}}buildShareQuery(e,t,i=!0){var s,n,o;const{userStore:r}=e,a=Q(null!==(s=t.path)&&void 0!==s?s:"");let l=this.path,g={};if(k(t,"path")&&(l=m(a),g=re(f(a))||{}),q(g)&&(g=re(null!==(n=t.query)&&void 0!==n?n:"")||{}),q(g)&&(g=re(null!==(o=this.query)&&void 0!==o?o:"")||{},y(C(g)).forEach((e=>{(["gioPreShareId","gioShareId","suid"].includes(e)||e.toLowerCase().startsWith("utm_"))&&N(g,e)}))),!i)return[l,oe(g),{}];const u={gioShareId:R(),suid:r.uid},d={contentType:t.contentType||g.contentType,contentId:t.contentId||g.contentId,gioPreShareId:this.queryShareId};return E(u,((e,t)=>{e||N(u,t)})),[l,oe(Object.assign(Object.assign({},g),u)),Object.assign(Object.assign({},u),d)]}}class Ye{constructor(e){this.growingIO=e,this.main=(e,t,i)=>{var s,n,o,r,a,l,g;const u=Date.now(),{emitter:d,minipInstance:c,plugins:h,vdsConfig:v,platformConfig:m,dataStore:{shareOut:f,eventHooks:I,toggleShareOut:y,buildAppMessageEvent:w,buildTimelineEvent:O,buildAddFavorites:S},inPlugin:b}=this.growingIO,{currentPage:T}=I;if(this.prevEvent[t]&&50>Date.now()-Number(this.prevEvent[t]))return;e||(e=c.getCurrentPage()),v.wepy&&(e.route=e.$is),e.route||(e.route=c.getCurrentPath(e));const _=e.route||e.uri||e.__route__||(null===(s=null==e?void 0:e.$page)||void 0===s?void 0:s.fullPath)||"";d.emit("minipLifecycle",{event:"Page "+t,timestamp:u,params:{page:e,args:i[0]}}),v.debug&&console.log("Page:",_,"#",t,u),this.prevEvent[t]=Date.now();const P=m.listeners.page;switch(d.emit("onComposeBefore",{page:e,event:"Page "+t,params:{page:e,args:i[0]}}),T.lastLifecycle=T.currentLifecycle,T.currentLifecycle=t,t){case P.pageLoad:this.argQuery[_]=A(e,"options")||A(e,"__displayReporter.query")||A(e,"$page.query")||A(e,"$wx.__displayReporter.query")||i[0]||{},N(this.argQuery[_],"$taroTimestamp"),T.parsePage(e,this.argQuery[_]);break;case P.pageShow:if(b)break;f&&I.currentPage.time||(T.parsePage(e,this.argQuery[_]),this.buildPageEvent()),y(!1),T.saveShareId(this.argQuery[_]),c.initImpression(c.getCurrentPage());break;case P.pageReady:v.taro&&z(v.taro)&&(null===(o=null===(n=this.growingIO.plugins)||void 0===n?void 0:n.gioTaroAdapter)||void 0===o||o.saveFullPage(document.body),c.initImpression(c.getCurrentPage()));break;case P.pageHide:case P.pageUnload:v.taro&&z(v.taro)||!(null===(r=null==h?void 0:h.gioImpressionTracking)||void 0===r?void 0:r.impressionObserver)||(null===(l=null===(a=null==h?void 0:h.gioImpressionTracking)||void 0===a?void 0:a.impressionObserver)||void 0===l||l.disconnect(),this.growingIO.plugins.gioImpressionTracking.impressionObserver=null);break;case P.shareApp:y(!0),v.followShare&&w(i);break;case P.shareTime:v.followShare&&O(i);break;case P.addFavorites:S(i);break;case P.tabTap:{const e=null===(g=null==h?void 0:h.gioEventAutoTracking)||void 0===g?void 0:g.buildTabClickEvent;v.autotrack&&e&&p(e)&&e(i[0]);break}}t===P.pageUnload&&(T.pageProps[_]=void 0)},this.buildPageEvent=()=>{const{minipInstance:e,dataStore:{scene:t,lastPageEvent:i,eventContextBuilder:s,eventInterceptor:n,eventHooks:o}}=this.growingIO,{currentPage:r}=o,a=Object.assign(Object.assign({eventType:"PAGE",referralPage:(null==i?void 0:i.path)||(null==i?void 0:i.p)||(t?`scn:${e.scnPrefix}${t}`:null)},s()),{timestamp:r.time});q(r.pageProps[a.path])||(a.attributes=r.pageProps[a.path]),n(a)},this.prevEvent={},this.argQuery={}}}class et{constructor(e){var t,i;this.growingIO=e,this.isNormalFc=(e,t)=>p(t)&&"constructor"!==e,this.objectTraverse=(e,t)=>{Object.getOwnPropertyNames(e).forEach((i=>t(i,e))),k(e,"methods")&&Object.getOwnPropertyNames(e.methods).forEach((i=>{e[i]||t(i,e.methods)})),k(e,"lifetimes")&&Object.getOwnPropertyNames(e.lifetimes).forEach((i=>{e[i]||t(i,e.lifetimes)})),k(e,"pageLifetimes")&&Object.getOwnPropertyNames(e.pageLifetimes).forEach((i=>{e[i]||t(i,e.pageLifetimes)}))},this.supLifeFcs=(e,t)=>{v(this[t+"Handlers"])&&this[t+"Handlers"].forEach((t=>{p(e[t])||["onShareAppMessage","onShareTimeline"].includes(t)||(e[t]=()=>{})}))},this.lifeFcEffects=(e,t,i)=>{const s=this;return["onShareTimeline","onAddToFavorites"].includes(e)?function(...n){let o=t.apply(this,n);"onShareTimeline"===e&&s.growingIO.vdsConfig.followShare&&(o=s.currentPage.updateTimelineResult(s.growingIO,null!=o?o:{})),"onAddToFavorites"===e&&(o=s.currentPage.updateAddFavoritesResult(s.growingIO,null!=o?o:{}));const r=[].slice.call(n);return o&&r.push(o),s[`def${i}Cbs`][e].apply(this,r),o}:function(...n){return we(this,void 0,void 0,(function*(){let o;try{if("onShareAppMessage"===e&&(o=yield t.apply(this,n),s.growingIO.vdsConfig.followShare)){if("promise"===H(o.promise)){const e=function(){return we(this,void 0,void 0,(function*(){let e=o;return new Promise((t=>{o.promise.then((t=>{e=t}));let i=setTimeout((()=>{t(Object.assign({},e)),clearTimeout(i),i=void 0}),3e3)}))}))};o=Object.assign(Object.assign({},o),yield e()),N(o,"promise")}o=s.currentPage.updateAppMessageResult(s.growingIO,null!=o?o:{})}const r=[].slice.call(n);o&&r.push(o),s[`def${i}Cbs`][e].apply(this,r)}catch(e){$(e,"error")}return"onShareAppMessage"!==e&&(o=t.apply(this,n)),s.growingIO.emitter.emit("minipLifecycle",{event:`${i} ${e}End`,timestamp:Date.now(),params:{instance:this,arguments:Array.from(n)}}),o}))}},this.customFcEffects=(e,t)=>{const i=this;return function(...s){var n,o;let r;if(i.growingIO.vdsConfig.autotrack&&i.growingIO.plugins.gioEventAutoTracking)try{let t=s[0]||{};k(t,"type")&&((null==t?void 0:t.currentTarget)||(null==t?void 0:t.target))||(t=s[s.length-1]),((null==t?void 0:t.currentTarget)||(null==t?void 0:t.target))&&i.actionEventTypes.includes(t.type)&&(p(i.actionEffects)||(i.actionEffects=(null===(o=null===(n=i.growingIO.plugins)||void 0===n?void 0:n.gioEventAutoTracking)||void 0===o?void 0:o.main)||function(){}),null==i||i.actionEffects(t,e))}catch(e){$(e,"error")}return r=t.apply(this,s),r}},this.appApplyProxy=(e,t)=>this.appHandlers.includes(e)?this.lifeFcEffects(e,t,"App"):this.customFcEffects(e,t),this.pageApplyProxy=(e,t)=>this.pageHandlers.includes(e)?this.lifeFcEffects(e,t,"Page"):this.customFcEffects(e,t),this.appOverriding=e=>(this.supLifeFcs(e,"app"),this.objectTraverse(e,((e,t)=>{this.isNormalFc(e,t[e])&&(t[e]=this.appApplyProxy(e,t[e]))})),e),this.pageOverriding=e=>(this.supLifeFcs(e,"page"),this.objectTraverse(e,((e,t)=>{this.isNormalFc(e,t[e])&&(t[e]=this.pageApplyProxy(e,t[e]))})),e),this.componentOverriding=e=>(e.methods||(e.methods={}),this.supLifeFcs(e.methods,"page"),this.objectTraverse(e.methods,((e,t)=>{this.isNormalFc(e,t[e])&&(t[e]=this.pageApplyProxy(e,t[e]))})),e),this.growingApp=e=>this.originalApp(this.appOverriding(e)),this.growingPage=e=>this.originalPage(this.pageOverriding(e)),this.growingComponent=e=>this.originalComponent(this.componentOverriding(e)),this.growingBehavior=e=>this.originalBehavior(this.componentOverriding(e)),this.nativeGrowing=(e=["App","Page","Component","Behavior"])=>{const t=this,{platformConfig:i}=this.growingIO,s=i.hooks;if(e.includes("App"))try{s.App&&!this.appHooked&&(App=function(...e){return t.growingApp(e[0])},this.appHooked=!0)}catch(e){}if(e.includes("Page"))try{s.Page&&!this.pageHooked&&(Page=function(...e){return t.growingPage(e[0])},this.pageHooked=!0)}catch(e){}if(e.includes("Component"))try{s.Component&&!this.componentHooked&&(Component=function(...e){return t.growingComponent(e[0])},this.componentHooked=!0)}catch(e){}if(e.includes("Behavior"))try{s.Behavior&&!this.behaviorHooked&&(Behavior=function(...e){return t.growingBehavior(e[0])},this.behaviorHooked=!0)}catch(e){}},this.initEventHooks=()=>{const e=this,{platformConfig:t,gioPlatform:i}=this.growingIO;this.appHandlers.forEach((t=>{this.defAppCbs[t]=function(...i){e.appEffects.main(t,i)}})),this.pageHandlers.forEach((t=>{this.defPageCbs[t]=function(...i){e.pageEffects.main(this,t,i)}})),t.canHook?this.nativeGrowing():"quickapp"===i&&(window.GioApp=function(...t){return e.appOverriding(t[0])},window.GioPage=function(...t){return e.pageOverriding(t[0])},window.GioComponent=function(...t){return e.pageOverriding(t[0])}),this.growingIO.App=F((()=>App)),this.growingIO.Page=F((()=>Page)),this.growingIO.Component=F((()=>Component)),this.growingIO.Behavior=F((()=>Behavior)),"quickapp"===i&&(this.growingIO.GioApp=window.GioApp,this.growingIO.GioPage=window.GioPage,this.growingIO.GioComponent=window.GioComponent)};const s=null===(t=this.growingIO)||void 0===t?void 0:t.platformConfig;this.defAppCbs={},this.defPageCbs={},this.appHandlers=s.appHandlers,this.pageHandlers=s.pageHandlers,this.actionEventTypes=s.actionEventTypes,this.originalApp=s.originalApp,this.originalPage=s.originalPage,this.originalComponent=s.originalComponent,this.originalBehavior=null!==(i=s.originalBehavior)&&void 0!==i?i:function(){},this.appEffects=new Je(this.growingIO),this.pageEffects=new Ye(this.growingIO),this.currentPage=new Ze(this.growingIO)}}class it{constructor(s){this.growingIO=s,this.ALLOW_SETTING=Object.assign({},e,"saas"===this.growingIO.gioEnvironment?i:t),this.allowOptKeys=C(this.ALLOW_SETTING),this.initStorageInfo=()=>{const{minipInstance:e}=this.growingIO,t=ee();let i=t.gio_esid?t.gio_esid:e.getStorageSync(this.esidStorageName);i=h(i)&&!g(i)?i:{},this._esid={},C(i).forEach((e=>{this._esid[e]=Number.isNaN(Number(i[e]))||i[e]>=1e9||1>i[e]?1:i[e]})),x(i,this._esid)||e.setStorageSync(this.esidStorageName,this._esid);const s=t.gio_gsid?t.gio_gsid:Number.parseInt(e.getStorageSync(this.gsidStorageName),10);this._gsid=Number.isNaN(s)||s>=1e9||1>s?1:s,this._stid=this._gsid,s!==this._gsid&&e.setStorageSync(this.gsidStorageName,this._gsid)},this.saveStorageInfo=()=>{const{minipInstance:e}=this.growingIO;this._stid=this._gsid,ne(e,[{key:this.esidStorageName,value:this._esid},{key:this.gsidStorageName,value:this._gsid}])},this.initOptions=e=>{var t,i,s,n,o,r,g,u,d,c,h;const{projectId:p,dataSourceId:m,appId:f}=e,I={};this.allowOptKeys.forEach((t=>{const i=this.ALLOW_SETTING[t].type;(v(i)?i.includes(H(e[t])):H(e[t])===this.ALLOW_SETTING[t].type)?"ignoreFields"===t?I.ignoreFields=e.ignoreFields.filter((e=>a.includes(e))):"extraParams"===t?I.extraParams=e.extraParams.filter((e=>l.includes(e))):I[t]=e[t]:I[t]=this.ALLOW_SETTING[t].default})),I.uploadInterval=Math.round(I.uploadInterval),(Number.isNaN(I.uploadInterval)||0>I.uploadInterval||I.uploadInterval>2e3)&&(I.uploadInterval=1e3),this.growingIO.vdsConfig=Object.assign(Object.assign({},I),{projectId:p,dataSourceId:m,appId:f,performance:{monitor:null===(i=null===(t=I.performance)||void 0===t?void 0:t.monitor)||void 0===i||i,exception:null===(n=null===(s=I.performance)||void 0===s?void 0:s.exception)||void 0===n||n,network:null!==(r=null===(o=I.performance)||void 0===o?void 0:o.network)&&void 0!==r&&r}}),this.keepAlive=I.keepAlive,I.dataCollect||$("已关闭数据采集","info"),I.autotrack||$("已关闭无埋点","info"),this.growingIO.inPlugin&&(this.growingIO.vdsConfig.autotrack=!1);const{cml:y,uniVue:w,wepy:O,taro:S,remax:b}=I;"full"!==this.growingIO.gioFramework||y||w||O||S||b||(this.growingIO.platformConfig.canHook=!0),this.eventHooks=new et(this.growingIO),this.growingIO.inPlugin||this.eventHooks.initEventHooks();const{plugins:T}=this.growingIO;y&&(null===(g=null==T?void 0:T.gioChameleonAdapter)||void 0===g||g.main()),w&&(null===(u=null==T?void 0:T.gioUniAppAdapter)||void 0===u||u.main()),O&&(null===(d=null==T?void 0:T.gioWepyAdapter)||void 0===d||d.main()),S&&(null===(c=null==T?void 0:T.gioTaroAdapter)||void 0===c||c.main()),b&&(null===(h=null==T?void 0:T.gioRemaxAdapter)||void 0===h||h.main())},this.setOption=(e,t)=>{var i;const{vdsConfig:s,callError:n,uploader:o,emitter:r}=this.growingIO,a=u(e)&&this.allowOptKeys.includes(e),l=a&&typeof t===(null===(i=this.ALLOW_SETTING[e])||void 0===i?void 0:i.type);if(a&&l){if("dataCollect"===e&&!1===s.dataCollect&&!0===t){let e=setTimeout((()=>{this.sendVisit(),this.sendPage(),clearTimeout(e),e=null}))}return s[e]=t,["host","scheme"].includes(e)&&(null==o||o.generateURL()),r.emit("OPTION_CHANGE",{optionName:e,optionValue:t}),!0}return n("setOption > "+e),!1},this.getOption=e=>{const{vdsConfig:t,callError:i}=this.growingIO;return e&&k(t,O(e))?t[O(e)]:g(e)?Object.assign({},t):void i("getOption > "+e)},this.toggleShareOut=e=>{c(e)?this.shareOut=e:this.shareOut=!this.shareOut},this.sendVisit=()=>{this.eventHooks.appEffects.buildVisitEvent(this.lastVisitEvent)},this.sendPage=()=>{this.eventHooks.pageEffects.buildPageEvent()},this.eventInterceptor=e=>{const{systemInfo:t,network:i}=this.growingIO.minipInstance;q(t)||q(i)?this.interceptEvents.push(e):q(this.interceptEvents)?this.eventConverter(e):([...this.interceptEvents,e].forEach((e=>{const t=Object.assign(Object.assign({},e),this.eventContextBuilder({path:e.path,query:e.query,timestamp:e.timestamp}));this.eventConverter(t)})),this.interceptEvents=[])},this.eventReleaseInspector=()=>{const{minipInstance:{systemInfo:e,network:t}}=this.growingIO;e&&t&&!q(this.interceptEvents)&&([...this.interceptEvents].forEach((e=>{const t=Object.assign(Object.assign({},e),this.eventContextBuilder({path:e.path,query:e.query,timestamp:e.timestamp}));this.eventConverter(t)})),this.interceptEvents=[])},this.buildAppMessageEvent=e=>{},this.buildTimelineEvent=e=>{},this.buildAddFavorites=e=>{},this.esidStorageName="_growing_esid_",this.gsidStorageName="_growing_gsid_",this.initStorageInfo(),this.eventContextBuilder=new Xe(this.growingIO).main,this.shareOut=!1,this.lastVisitEvent={},this.lastPageEvent={},this.locationData={},this.generalProps={},this.interceptEvents=[],this.growingIO.emitter.on("onComposeAfter",(({composedEvent:e})=>{"VISIT"!==e.eventType&&"vst"!==e.t||(this.lastVisitEvent=e),"PAGE"!==e.eventType&&"page"!==e.t||(this.lastPageEvent=e)}))}get esid(){const e=ee(),t=Y(e);return!q(t)&&e.gio_esid?e.gio_esid:this._esid}set esid(e){const t={};C(e).forEach((i=>{t[i]=Number.isNaN(e[i])||e[i]>=1e9||1>e[i]?1:e[i]})),x(t,this._esid)||(this._esid=t,ee().gio_esid=this._esid)}get gsid(){const e=ee(),t=Y(e);return!q(t)&&e.gio_gsid?e.gio_gsid:this._gsid}set gsid(e){const t=Number.parseInt(e,10);this._gsid=Number.isNaN(t)||e>=1e9||1>e?1:e,ee().gio_gsid=this._gsid,10>this._gsid-this._stid||this.saveStorageInfo()}get scene(){return this._scene}set scene(e){const t=this._scene;this._scene=e,t!==this._scene&&this.growingIO.emitter.emit("SCENE_UPDATE",{newScene:e,oldScene:t})}}class st extends it{constructor(e){super(e),this.growingIO=e,this.eventConverter=e=>{const{vdsConfig:t,dataStore:i,uploader:s}=this.growingIO;if(t.dataCollect){e.globalSequenceId=i.gsid,e.eventSequenceId=i.esid[e.eventType]||1;const t={};E(e,((e,i)=>{var s;if("element"===i){const i=null!==(s=m(e))&&void 0!==s?s:{};E(i,((e,i)=>{q(e)&&0!==e||(t[i]=e)}))}else q(e)&&0!==e||(t[i]=e)})),this.growingIO.dataStore.gsid+=1,this.growingIO.dataStore.esid=Object.assign(Object.assign({},this.growingIO.dataStore.esid),{[t.eventType]:(this.growingIO.dataStore.esid[t.eventType]||1)+1}),this.growingIO.emitter.emit("onComposeAfter",{composedEvent:t}),s.commitRequest(t)}},this.buildAppMessageEvent=e=>{var t;const i=e[0];let s;2>e.length?1===e.length&&(s=i):s=e[1];const{dataStore:{eventContextBuilder:n,eventInterceptor:o,eventHooks:{currentPage:r}}}=this.growingIO,a=((null==s?void 0:s.path)||"").split("?");o(Object.assign({eventType:"CUSTOM",eventName:"$mp_on_share",pageShowTimestamp:r.time,attributes:Object.assign({$from:i.from,$target:null===(t=null==i?void 0:i.target)||void 0===t?void 0:t.id,$share_title:null==s?void 0:s.title,$share_path:m(a),$share_query:a[1]},null==s?void 0:s.attributes)},n()))},this.buildTimelineEvent=e=>{var t;const i=e[0];let s;2>e.length?1===e.length&&(s=i):s=e[1];const{dataStore:{eventContextBuilder:n,eventInterceptor:o,eventHooks:{currentPage:r}}}=this.growingIO,a=((null==s?void 0:s.path)||"").split("?");o(Object.assign({eventType:"CUSTOM",eventName:"$mp_share_timeline",pageShowTimestamp:r.time,attributes:Object.assign({$target:null===(t=null==i?void 0:i.target)||void 0===t?void 0:t.id,$share_title:null==s?void 0:s.title,$share_path:m(a),$share_query:a[1]},null==s?void 0:s.attributes)},n()))},this.buildAddFavorites=e=>{const t=e[0];let i;2>e.length?1===e.length&&(i=t):i=e[1];const{dataStore:{eventContextBuilder:s,eventInterceptor:n,eventHooks:{currentPage:o}}}=this.growingIO,r=((null==i?void 0:i.path)||"").split("?");n(Object.assign({eventType:"CUSTOM",eventName:"$mp_add_favorites",pageShowTimestamp:o.time,attributes:{$share_title:null==i?void 0:i.title,$share_path:m(r),$share_query:r[1]}},s()))},this.trackTimers={}}}class nt{constructor(e){this.growingIO=e,this.commitRequest=e=>{const t=Object.assign({},e),{vdsConfig:i}=this.growingIO;i.forceLogin?this.hoardingQueue.push(t):(this.requestQueue.push(t),this.initiateRequest())},this.initiateRequest=e=>{var t,i;const{plugins:s,vdsConfig:n}=this.growingIO;[...this.hoardingQueue,...this.requestQueue].length>0&&this.requestingNum<this.requestLimit&&((null===(t=null==n?void 0:n.tbConfig)||void 0===t?void 0:t.cloudFuncSend)?null===(i=null==s?void 0:s.gioTaobaoSendAdapter)||void 0===i||i.singleInvoke():e?this.batchInvoke():this.batchInvokeThrottle())},this.batchInvoke=()=>{var e,t;const{vdsConfig:i,plugins:s,emitter:n}=this.growingIO;let o=[...this.hoardingQueue,...this.requestQueue];o.length>50?(o=o.slice(0,50),this.hoardingQueue.length>50?this.hoardingQueue=this.hoardingQueue.slice(50):(this.hoardingQueue=[],this.requestQueue=this.requestQueue.slice(50-this.hoardingQueue.length))):(this.hoardingQueue=[],this.requestQueue=[]);let r=o.filter((e=>(this.retryIds[e.globalSequenceId||e.esid]||0)<=this.retryLimit));q(r)||(i.debug&&console.log("[GrowingIO Debug]:",JSON.stringify(r,null,2)),n.emit("onSendBefore",{requestData:r}),(null===(e=null==i?void 0:i.tbConfig)||void 0===e?void 0:e.cloudAppId)?null===(t=null==s?void 0:s.gioTaobaoSendAdapter)||void 0===t||t.tbCloudAppInvoke(r):this.normalBatchInvoke(r))},this.batchInvokeThrottle=j(this.batchInvoke,this.growingIO.vdsConfig.uploadInterval,!1,!1),this.normalBatchInvoke=e=>{var t;const{minipInstance:i,vdsConfig:s,emitter:n,plugins:o,gioEnvironment:r}=this.growingIO;this.requestingNum+=1;const a={"content-type":"jdp"===i.platform?"application/json":"application/json;charset=UTF-8"};let l=[...e];const g=s.compress&&(null===(t=null==o?void 0:o.gioCompress)||void 0===t?void 0:t.compressToUTF16);"cdp"===r&&g&&(l=o.gioCompress.compressToUTF16(JSON.stringify(e)),a["X-Compress-Codec"]="1"),i.request({url:`${this.requestURL}?stm=${Date.now()}${"cdp"===r?"&compress="+(g?"1":"0"):""}`,header:a,method:"POST",data:l,timeout:this.requestTimeout,fail:t=>{[200,204].includes(t.code)||(v(e)?e.forEach((e=>{this.requestFailFn(e)})):this.requestFailFn(e),$("请求失败!"+JSON.stringify(t),"error"))},complete:e=>{this.requestingNum-=1,n.emit("onSendAfter",{result:e}),this.initiateRequest()}})},this.requestFailFn=e=>{if(this.retryIds[e.globalSequenceId||e.esid]||(this.retryIds[e.globalSequenceId||e.esid]=0),this.retryIds[e.globalSequenceId||e.esid]+=1,!this.requestQueue.some((t=>t.globalSequenceId===e.globalSequenceId&&t.esid===e.esid))){let t=setTimeout((()=>{q(this.requestQueue)?(this.requestQueue.push(e),this.initiateRequest()):this.requestQueue.push(e),clearTimeout(t),t=null}),800)}},this.hoardingQueue=[],this.requestQueue=[],this.requestLimit=3,this.requestTimeout=5e3,this.retryLimit=2,this.retryIds={},this.requestingNum=0,this.requestURL=""}}class ot extends nt{constructor(e){super(e),this.growingIO=e,this.generateURL=()=>{let{scheme:e,host:t="",projectId:i}=this.growingIO.vdsConfig;e&&T(e,"http")?_(O(e),"://")||(e+="://"):e="https://",t=t.replace("http://","").replace("https://",""),this.requestURL=`${e}${t}/v3/projects/${i}/collect`},this.generateURL()}}const rt=new class extends ze{constructor(){var e,t;super(),this.registerPlugins=e=>{this.plugins.pluginItems=[...this.plugins.pluginItems,...e],this.plugins.installAll(e)},this.initCallback=()=>{this.uploader=new ot(this),this.vdsConfig.enableIdMapping||(this.userStore.userKey="")},this.setTrackerScheme=e=>{["http","https"].includes(e)?(this.dataStore.setOption("scheme",e),this.notRecommended()):this.callError("scheme",!1)},this.setTrackerHost=e=>{ge.test(e)||ue.test(e)?(this.dataStore.setOption("host",e),this.notRecommended()):this.callError("host",!1)},this.identify=e=>{if(this.vdsConfig.forceLogin){if(!le(e))return void this.callError("identify");const t=O(e).slice(0,1e3);this.userStore.uid=t,this.uploader.hoardingQueue.forEach(((e,i)=>this.uploader.hoardingQueue[i].deviceId=t)),this.dataStore.setOption("forceLogin",!1),this.uploader.initiateRequest(!0)}else this.callError("identify",!1,"forceLogin未开启")},this.setUserAttributes=e=>{var t,i;!q(e)&&h(e)?null===(i=null===(t=this.plugins)||void 0===t?void 0:t.gioCustomTracking)||void 0===i||i.buildUserAttributesEvent(e):this.callError("setUserAttributes")},this.setUserId=(e,t)=>{if(le(e)){const i=this.userStore.gioId;e=O(e).slice(0,1e3),t=O(t).slice(0,1e3),this.userStore.userId=e,this.vdsConfig.enableIdMapping&&(this.userStore.userKey=g(t)?"":t),this.reissueLogic(i,e)}else this.callError("setUserId")},this.clearUserId=()=>{this.userStore.userId=void 0,this.userStore.userKey=void 0},this.track=(e,t,i)=>{var s,n;((null===(n=null===(s=this.plugins)||void 0===s?void 0:s.gioCustomTracking)||void 0===n?void 0:n.buildCustomEvent)||function(){})(e,Object.assign(Object.assign({},this.dataStore.generalProps),h(t)&&!q(t)?t:{}),i)},this.reissueLogic=(e,t)=>{e&&e!==t&&(this.userStore.sessionId="",this.dataStore.sendVisit()),e||e===t||this.dataStore.sendVisit()},this.trackTimerStart=e=>!!this.vdsConfig.dataCollect&&L(e,(()=>{const t=R();return this.dataStore.trackTimers[t]={eventName:e,leng:0,start:+Date.now()},t})),this.trackTimerPause=e=>{if(e&&this.dataStore.trackTimers[e]){const t=this.dataStore.trackTimers[e];return t.start&&(t.leng=t.leng+(+Date.now()-t.start)),t.start=0,!0}return!1},this.trackTimerResume=e=>{if(e&&this.dataStore.trackTimers[e]){const t=this.dataStore.trackTimers[e];return 0===t.start&&(t.start=+Date.now()),!0}return!1},this.trackTimerEnd=(e,t)=>{if(this.vdsConfig.dataCollect){const i=864e5;if(e&&this.dataStore.trackTimers[e]){const s=this.dataStore.trackTimers[e];if(0!==s.start){const e=+Date.now()-s.start;s.leng=e>0?s.leng+e:0}return this.track(s.eventName,Object.assign(Object.assign({},t),{event_duration:s.leng>i?0:s.leng/1e3})),this.removeTimer(e),!0}return $("未查找到对应的计时器，请检查!","error"),!1}return!1},this.removeTimer=e=>!(!e||!this.dataStore.trackTimers[e]||(delete this.dataStore.trackTimers[e],0)),this.clearTrackTimer=()=>{this.dataStore.trackTimers={}},this.dataStore=new st(this),p(null===(e=this.minipInstance.minip)||void 0===e?void 0:e.onAppHide)&&this.minipInstance.minip.onAppHide((()=>{E(this.dataStore.trackTimers,(e=>{e.start&&(e.leng=e.leng+(+Date.now()-e.start))}))})),p(null===(t=this.minipInstance.minip)||void 0===t?void 0:t.onAppShow)&&this.minipInstance.minip.onAppShow((()=>{E(this.dataStore.trackTimers,(e=>{e.start&&(e.start=+Date.now())}))})),this.emitter.on("OPTION_CHANGE",(({optionName:e,optionValue:t})=>{"dataCollect"===e&&!1===t&&this.clearTrackTimer()}))}},at=function(){const e=arguments[0];if(u(e)&&s.includes(e)&&rt[e]){const i=I(Array.from(arguments));if("init"===e){const e=!(t=rt).vdsConfig&&!t.gioSDKInitialized||($("SDK重复初始化，请检查是否重复加载SDK或接入其他平台SDK导致冲突!","warn"),!1),s=(e=>!!y(e)||($('SDK初始化失败，请使用 gdp("init", "您的GrowingIO项目 accountId", "您项目的 dataSourceId", "你的应用 AppId", options); 进行初始化!',"error"),!1))(i),n=(e=>{const t=e[0];let i=f(e);return le(t)?(h(i)&&i||(i={}),{projectId:t,userOptions:i}):($("SDK初始化失败，accountId 参数不合法!","error"),!1)})(i),o=(e=>{const t=e[1];let i=e[2];const s=f(e);return t&&u(t)?le(i)?{dataSourceId:t,appId:i,cdpOptions:s}:($("SDK初始化失败，appId 参数不合法!","error"),!1):($("SDK初始化失败，dataSourceId 参数不合法!","error"),!1)})(i);if(e&&s&&n&&o){const{projectId:e}=n,{dataSourceId:t,appId:i,cdpOptions:s}=o;return rt.init(Object.assign(Object.assign({},s),{projectId:e,dataSourceId:t,appId:i}))}}else if("registerPlugins"===e)rt.registerPlugins(i[0]);else{if(rt.gioSDKInitialized&&rt.vdsConfig)return rt[e](...i);$("SDK未初始化!","error")}}else r.includes(e)?$(`方法 ${O(e)} 已被弃用!`,"warn"):$(`不存在名为 ${O(e)} 的方法调用!`,"error");var t};te().gdp=at,te().gioEnvironment="cdp",te().gioSDKVersion=rt.sdkVersion;export{at as default};
