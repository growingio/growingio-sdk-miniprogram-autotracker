const i=i=>({}.toString.call(i).slice(8,-1).toLowerCase()),t=t=>{return(o=t,(t=>"[object Object]"==={}.toString.call(t)&&!(t=>["undefined","null"].includes(i(t)))(t))(o)?Object.keys(o):[]).filter((i=>i.indexOf("__sub")>-1&&i.indexOf("gio__")>-1)).sort();var o},o=()=>{let i=(i=>{try{return getApp({allowDefault:!0})}catch(i){return}})();return i||(i=global||$global),i};let s;var n={name:"gioMultiIntegrate",method:class{constructor(i){this.growingIO=i,this.addListener=()=>{const i=o();(null==i?void 0:i.gioEmitter)?null==i||i.gioEmitter.on("OPTION_CHANGE",(({optionName:i,optionValue:t})=>{this.storeUpdate("vdsConfig",i,t)})):s.consoleText("主包实例错误，请检查主包是否已集成插件!","warn")},this.storeUpdate=(i,s,n)=>{let e=o();const g=e.__gio__;g&&(g[i][s]=n),t(e).forEach((t=>{const o=e[t];o[i]&&(o[i][s]=n)}))},s=this.growingIO.utils,this.growingIO.emitter.on("SDK_INITIALIZED",(()=>{this.subpackage=this.growingIO.vdsConfig.subpackage;const i=o();if(this.subpackage){this.growingIO.subKey=`__sub${t(i).length+1}_gio__`,this.subKey=this.growingIO.subKey,i[this.subKey]=this.growingIO,this.growingIO.identify=()=>{};const o=i.__gio__;o&&(s.keys(this.growingIO).forEach((i=>{s.isObject(this.growingIO[i])&&("vdsConfig"===i?s.keys(o.vdsConfig).forEach((i=>{["cml","remax","taro","taroVue","uniVue","wepy","subpackage"].includes(i)||(this.growingIO.vdsConfig[i]=o.vdsConfig[i])})):"plugins"!==i&&(this.growingIO[i]=o[i]))})),this.growingIO.vdsConfig.autotrack=!1,this.growingIO.plugins.uninstall("gioEventAutoTracking")&&s.consoleText("多项目集成，无埋点已自动关闭!","info"),this.addListener())}else{const i=o();this.growingIO.vdsConfig.autotrack=!1,this.growingIO.plugins.uninstall("gioEventAutoTracking")&&s.consoleText("多项目集成，无埋点已自动关闭!","info"),i.gioEmitter=this.growingIO.emitter,i.gio_esid=this.growingIO.dataStore.esid,i.gio_gsid=this.growingIO.dataStore.gsid}}))}}};export{n as default};
