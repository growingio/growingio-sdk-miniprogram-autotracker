var n,i=function(n){return"function"===o(n)},o=function(n){return{}.toString.call(n).slice(8,-1).toLowerCase()},t=function(n){try{return n()}catch(n){return}},r=function(n){return(i=n,function(n){return"[object Object]"==={}.toString.call(n)&&!function(n){return["undefined","null"].includes(o(n))}(n)}(i)?Object.keys(i):[]).filter((function(n){return n.indexOf("__sub")>-1&&n.indexOf("gio__")>-1})).sort();var i},e=function(){var n=t((function(){return getApp({allowDefault:!0})}));return n||(n=g()),n},g=function(){var n;return null!==(n=t((function(){return $global})))&&void 0!==n?n:global},u={name:"gioMultiIntegrate",method:function(o){var t=this;this.growingIO=o,this.addListener=function(){var i=e();(null==i?void 0:i.gioEmitter)?null==i||i.gioEmitter.on("OPTION_CHANGE",(function(n){var i=n.optionName,o=n.optionValue;t.storeUpdate("vdsConfig",i,o)})):n.consoleText("主包实例错误，请检查主包是否已集成插件!","warn")},this.storeUpdate=function(n,o,t){var g=e(),u=i(g.__gio__)?g.__gio__():g.__gio__;u&&(u[n][o]=t),r(g).forEach((function(r){var e=i(g[r])?g[r]():g[r];e[n]&&(e[n][o]=t)}))},n=this.growingIO.utils,this.growingIO.emitter.on("SDK_INITIALIZED",(function(){t.subpackage=t.growingIO.vdsConfig.subpackage;var o=e();if(t.subpackage){t.growingIO.subKey="__sub".concat(r(o).length+1,"_gio__"),t.subKey=t.growingIO.subKey,o[t.subKey]=function(){return t.growingIO},t.growingIO.identify=function(){};var g=i(o.__gio__)?o.__gio__():o.__gio__;g&&(n.keys(t.growingIO).forEach((function(i){n.isObject(t.growingIO[i])&&("vdsConfig"===i?n.keys(g.vdsConfig).forEach((function(n){["cml","remax","taro","taroVue","uniVue","wepy","subpackage"].includes(n)||(t.growingIO.vdsConfig[n]=g.vdsConfig[n])})):"plugins"!==i&&(t.growingIO[i]=g[i]))})),t.growingIO.vdsConfig.autotrack=!1,t.growingIO.plugins.uninstall("gioEventAutoTracking")&&n.consoleText("多项目集成，无埋点已自动关闭!","info"),t.addListener())}else{var u=e();t.growingIO.vdsConfig.autotrack=!1,t.growingIO.plugins.uninstall("gioEventAutoTracking")&&n.consoleText("多项目集成，无埋点已自动关闭!","info"),u.gioEmitter=t.growingIO.emitter,u.gio_esid=t.growingIO.dataStore.esid,u.gio_gsid=t.growingIO.dataStore.gsid}}))}};export{u as default};
