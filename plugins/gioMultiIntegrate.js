const t=t=>{return(i=t,"object"===(t=>{const i=typeof t;return"object"===i?null===t?"null":(t=>Array.isArray(t)&&"[object Array]"==={}.toString.call(t))(t)?"array":i:i})(i)?Object.keys(i):[]).filter((t=>t.indexOf("__sub")>-1&&t.indexOf("gio__")>-1)).sort();var i},i=()=>{let t=(t=>{try{return getApp({allowDefault:!0})}catch(t){return}})();return t||(t=global||$global),t};let o;var s={name:"gioMultiIntegrate",method:class{constructor(s){this.growingIO=s,this.addListener=()=>{const t=i();(null==t?void 0:t.gioEmitter)?null==t||t.gioEmitter.on("OPTION_CHANGE",(({optionName:t,optionValue:i})=>{this.storeUpdate("vdsConfig",t,i)})):o.consoleText("主包实例错误，请检查主包是否已集成插件!","warn")},this.storeUpdate=(o,s,n)=>{let g=i();const e=g.__gio__;e&&(e[o][s]=n),t(g).forEach((t=>{const i=g[t];i[o]&&(i[o][s]=n)}))},o=this.growingIO.utils,this.growingIO.emitter.on("SDK_INITIALIZED",(()=>{this.subpackage=this.growingIO.vdsConfig.subpackage;const s=i();if(this.subpackage){this.growingIO.subKey=`__sub${t(s).length+1}_gio__`,this.subKey=this.growingIO.subKey,s[this.subKey]=this.growingIO,this.growingIO.identify=()=>{};const i=s.__gio__;i&&(o.keys(this.growingIO).forEach((t=>{o.isObject(this.growingIO[t])&&("vdsConfig"===t?o.keys(i.vdsConfig).forEach((t=>{["cml","remax","taro","taroVue","uniVue","wepy","subpackage"].includes(t)||(this.growingIO.vdsConfig[t]=i.vdsConfig[t])})):"plugins"!==t&&(this.growingIO[t]=i[t]))})),this.growingIO.vdsConfig.autotrack=!1,this.growingIO.plugins.uninstall("gioEventAutoTracking")&&o.consoleText("多项目集成，无埋点已自动关闭!","info"),this.addListener())}else{const t=i();this.growingIO.vdsConfig.autotrack=!1,this.growingIO.plugins.uninstall("gioEventAutoTracking")&&o.consoleText("多项目集成，无埋点已自动关闭!","info"),t.gioEmitter=this.growingIO.emitter,t.gio_esid=this.growingIO.dataStore.esid,t.gio_gsid=this.growingIO.dataStore.gsid}}))}}};export{s as default};
